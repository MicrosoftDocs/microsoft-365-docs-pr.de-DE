---
title: Mandantenisolation in der Microsoft 365-Suche
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
f1.keywords:
- NOCSH
description: In diesem Artikel finden Sie eine Erläuterung der Funktionsweise der Mandantenisolation, um Mandantendaten in Microsoft 365 Suche zu trennen.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 3416afdeceaa7000b516ec89b4a2a1e59d8708d0
ms.sourcegitcommit: 27addd4dac07926528b788215d2dcd0e46301eb1
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/16/2021
ms.locfileid: "53464084"
---
# <a name="tenant-isolation-in-microsoft-365-search"></a><span data-ttu-id="3484a-103">Mandantenisolation in der Microsoft 365-Suche</span><span class="sxs-lookup"><span data-stu-id="3484a-103">Tenant Isolation in Microsoft 365 Search</span></span>

<span data-ttu-id="3484a-104">SharePoint Die Onlinesuche verwendet ein Mandantentrennungsmodell, das die Effizienz gemeinsam genutzter Datenstrukturen mit dem Schutz vor Informationslecks zwischen Mandanten ausgleicht.</span><span class="sxs-lookup"><span data-stu-id="3484a-104">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants.</span></span> <span data-ttu-id="3484a-105">Mit diesem Modell verhindern wir, dass die Suchfeatures:</span><span class="sxs-lookup"><span data-stu-id="3484a-105">With this model, we prevent the Search features from:</span></span>

- <span data-ttu-id="3484a-106">Zurückgeben von Abfrageergebnissen, die Dokumente von anderen Mandanten enthalten</span><span class="sxs-lookup"><span data-stu-id="3484a-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="3484a-107">Verfügbarmachen ausreichender Informationen in Abfrageergebnissen, die ein erfahrener Benutzer informationen zu anderen Mandanten ableiten könnte</span><span class="sxs-lookup"><span data-stu-id="3484a-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="3484a-108">Anzeigen von Schemas oder Einstellungen von einem anderen Mandanten</span><span class="sxs-lookup"><span data-stu-id="3484a-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="3484a-109">Mischen von Analyseverarbeitungsinformationen zwischen Mandanten oder Speichern führt zu einem falschen Mandanten</span><span class="sxs-lookup"><span data-stu-id="3484a-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="3484a-110">Verwenden von Wörterbucheinträgen von einem anderen Mandanten</span><span class="sxs-lookup"><span data-stu-id="3484a-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="3484a-111">Für jeden Typ von Mandantendaten verwenden wir eine oder mehrere Schutzebenen im Code, um versehentliches Verlust von Informationen zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="3484a-111">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information.</span></span> <span data-ttu-id="3484a-112">Die kritischsten Daten verfügen über die meisten Schutzebenen, um sicherzustellen, dass ein einzelner Fehler nicht zu tatsächlichen oder wahrgenommenen Informationslecks führt.</span><span class="sxs-lookup"><span data-stu-id="3484a-112">The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="3484a-113">Mandantentrennung für den Suchindex</span><span class="sxs-lookup"><span data-stu-id="3484a-113">Tenant Separation for the Search Index</span></span>

<span data-ttu-id="3484a-114">Der Suchindex wird auf dem Datenträger auf den Servern gespeichert, auf dem die Indexkomponenten gehostet werden, und die Mandanten teilen sich die Indexdateien.</span><span class="sxs-lookup"><span data-stu-id="3484a-114">The search index is stored on disk in the servers hosting the index components and the tenants share the index files.</span></span> <span data-ttu-id="3484a-115">Die indizierten Dokumente eines Mandanten sind nur für Abfragen für diesen Mandanten sichtbar.</span><span class="sxs-lookup"><span data-stu-id="3484a-115">A tenant's indexed documents are visible only for queries for that tenant.</span></span> <span data-ttu-id="3484a-116">Drei unabhängige Mechanismen verhindern Informationslecks:</span><span class="sxs-lookup"><span data-stu-id="3484a-116">Three independent mechanisms prevent information leakage:</span></span>

- <span data-ttu-id="3484a-117">Mandanten-ID-Filterung</span><span class="sxs-lookup"><span data-stu-id="3484a-117">Tenant ID filtering</span></span>
- <span data-ttu-id="3484a-118">Präfix für Mandanten-ID</span><span class="sxs-lookup"><span data-stu-id="3484a-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="3484a-119">ACL-Prüfungen</span><span class="sxs-lookup"><span data-stu-id="3484a-119">ACL checks</span></span>

<span data-ttu-id="3484a-120">Alle drei Mechanismen müssten fehlschlagen, damit Search Dokumente an den falschen Mandanten zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="3484a-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="3484a-121">Mandanten-ID-Filterung und Mandanten-ID-Präfixe</span><span class="sxs-lookup"><span data-stu-id="3484a-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>

<span data-ttu-id="3484a-122">Suche präfixet jeden Begriff, der im Volltextindex mit der Mandanten-ID indiziert ist.</span><span class="sxs-lookup"><span data-stu-id="3484a-122">Search prefixes every term that is indexed in the full-text index with the tenant ID.</span></span> <span data-ttu-id="3484a-123">Wenn beispielsweise der Begriff *"foo"* für einen Mandanten mit der ID "*123*" indiziert wird, lautet der Eintrag im Volltextindex "*123foo".*</span><span class="sxs-lookup"><span data-stu-id="3484a-123">For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="3484a-124">Jede Abfrage wird konvertiert, um die Mandanten-ID mithilfe eines Prozesses namens Mandanten-ID-Filterung einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="3484a-124">Every query is converted to include the tenant ID using a process called tenant ID filtering.</span></span> <span data-ttu-id="3484a-125">Beispielsweise wird die Abfrage *"foo"* in "<*guid*> konvertiert. *foo* AND *tenantID*:<*guid*>", wobei <*GUID*> den Mandanten darstellt, der die Abfrage ausführt.</span><span class="sxs-lookup"><span data-stu-id="3484a-125">For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query.</span></span> <span data-ttu-id="3484a-126">Diese Abfragekonvertierung erfolgt innerhalb jedes Indexknotens, und weder Abfrage noch Inhaltsverarbeitung können sie beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="3484a-126">This query conversion occurs within each index node and neither query nor content processing can influence it.</span></span> <span data-ttu-id="3484a-127">Da die Mandanten-ID jeder Abfrage hinzugefügt wird, kann die Häufigkeit eines Ausdrucks in anderen Mandanten nicht abgeleitet werden, indem die beste Übereinstimmungsrangfolge in einem Mandanten betrachtet wird.</span><span class="sxs-lookup"><span data-stu-id="3484a-127">Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="3484a-128">Das Präfix des Mandanten-ID-Ausdrucks findet nur im Volltextindex statt.</span><span class="sxs-lookup"><span data-stu-id="3484a-128">Tenant ID term prefixing occurs only in the full-text index.</span></span> <span data-ttu-id="3484a-129">Feldsuchen, z. B.*"title:foo",* wechseln zu einem synthetischen Suchindex, bei dem Ausdrücke nicht mit dem Präfix "Mandanten-ID" versehen sind.</span><span class="sxs-lookup"><span data-stu-id="3484a-129">Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID.</span></span> <span data-ttu-id="3484a-130">Stattdessen wird bei Feldsuchen der Feldname vorangestellt.</span><span class="sxs-lookup"><span data-stu-id="3484a-130">Instead, fielded searches are prefixed with the field name.</span></span> <span data-ttu-id="3484a-131">Beispielsweise wird die Abfrage "*title:foo*" in "*fields.title:foo AND fields.tenantID*:<*guid*>" konvertiert.</span><span class="sxs-lookup"><span data-stu-id="3484a-131">For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>."</span></span> <span data-ttu-id="3484a-132">Da die Häufigkeit eines Ausdrucks die Rangfolge von Treffern im synthetischen Suchindex nicht beeinflusst, ist keine Mandantentrennung durch Begriffspräfixe erforderlich.</span><span class="sxs-lookup"><span data-stu-id="3484a-132">Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing.</span></span> <span data-ttu-id="3484a-133">Bei einer Feldsuche wie *"title:foo"* hängt die Trennung von Mandanteninhalten von der Mandanten-ID-Filterung nach Abfragekonvertierung ab.</span><span class="sxs-lookup"><span data-stu-id="3484a-133">For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="3484a-134">Listenüberprüfungen der Dokumentzugriffssteuerung</span><span class="sxs-lookup"><span data-stu-id="3484a-134">Document Access Control List Checks</span></span>

<span data-ttu-id="3484a-135">Die Suche steuert den Zugriff auf Dokumente über ACLs, die im Suchindex gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="3484a-135">Search controls access to documents through ACLs that are saved in the search index.</span></span> <span data-ttu-id="3484a-136">Jedes Element wird mit einer Reihe von Begriffen in einem speziellen ACL-Feld indiziert.</span><span class="sxs-lookup"><span data-stu-id="3484a-136">Every item is indexed with a set of terms in a special ACL field.</span></span> <span data-ttu-id="3484a-137">Das ACL-Feld enthält einen Ausdruck pro Gruppe oder Benutzer, der das Dokument anzeigen kann.</span><span class="sxs-lookup"><span data-stu-id="3484a-137">The ACL field contains one term per group or user that can view the document.</span></span> <span data-ttu-id="3484a-138">Jede Abfrage wird mit einer Liste von Zugriffssteuerungseintragsbegriffen (Access Control Entry, ACE) erweitert, einer für jede Gruppe, zu der der authentifizierte Benutzer gehört.</span><span class="sxs-lookup"><span data-stu-id="3484a-138">Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="3484a-139">Beispielsweise eine Abfrage wie "<*guid*>. *foo AND tenantID*:<*guid*>" wird: "<*guid*>. *foo AND tenantID*:<*guid* >  *AND* (*docACL:* < *ace1* >  *OR docACL*:<*ace2* >  *OR docACL*:<*ace3* >  *...*)"</span><span class="sxs-lookup"><span data-stu-id="3484a-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="3484a-140">Da Benutzer- und Gruppenbezeichner und damit ACEs eindeutig sind, bietet dies ein zusätzliches Maß an Sicherheit zwischen Mandanten für Dokumente, die nur für einige Benutzer sichtbar sind.</span><span class="sxs-lookup"><span data-stu-id="3484a-140">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users.</span></span> <span data-ttu-id="3484a-141">Das gleiche gilt für den speziellen Ace "Jeder außer externen Benutzern", der regulären Benutzern im Mandanten Zugriff gewährt.</span><span class="sxs-lookup"><span data-stu-id="3484a-141">The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant.</span></span> <span data-ttu-id="3484a-142">Da ACEs für "Jeder" jedoch für alle Mandanten identisch sind, hängt die Mandantentrennung für öffentliche Dokumente von der Mandanten-ID-Filterung ab.</span><span class="sxs-lookup"><span data-stu-id="3484a-142">But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering.</span></span> <span data-ttu-id="3484a-143">Verweigerungs-ACEs werden ebenfalls unterstützt.</span><span class="sxs-lookup"><span data-stu-id="3484a-143">Deny ACEs are also supported.</span></span> <span data-ttu-id="3484a-144">Die Abfrageerweiterung fügt eine Klausel hinzu, die ein Dokument aus dem Ergebnis entfernt, wenn eine Übereinstimmung mit einem Ablehnungs-ACE vorliegt.</span><span class="sxs-lookup"><span data-stu-id="3484a-144">The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="3484a-145">Bei Exchange Online Suche wird der Index wie in SharePoint Online nach Postfach-ID für die Postfächer einzelner Benutzer und nicht nach Mandanten-ID (Abonnement-ID) partitioniert.</span><span class="sxs-lookup"><span data-stu-id="3484a-145">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online.</span></span> <span data-ttu-id="3484a-146">Der Partitionierungsmechanismus ist identisch mit SharePoint Online, es gibt jedoch keine ACL-Filterung.</span><span class="sxs-lookup"><span data-stu-id="3484a-146">The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
