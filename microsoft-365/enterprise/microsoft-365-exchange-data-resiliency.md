---
title: Exchange Online-Datenresilienz in Microsoft 365
ms.author: josephd
author: JoeDavies-MSFT
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
f1.keywords:
- NOCSH
description: In diesem Artikel finden Sie eine Erläuterung der verschiedenen Aspekte der Datenausfall Sicherheit in Exchange Online und Microsoft 365.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: dfc53fd48a6de61cf47a0441cd2f8b0fa35a73f1
ms.sourcegitcommit: 79065e72c0799064e9055022393113dfcf40eb4b
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 08/14/2020
ms.locfileid: "46695952"
---
# <a name="exchange-online-data-resiliency-in-microsoft-365"></a><span data-ttu-id="735af-103">Exchange Online-Datenresilienz in Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="735af-103">Exchange Online Data Resiliency in Microsoft 365</span></span>

<span data-ttu-id="735af-104">Es gibt zwei Arten von Beschädigungen, die sich auf eine Exchange-Datenbank auswirken können: physikalische Beschädigungen, die in der Regel durch Hardware (insbesondere Speicherhardware) und logische Beschädigungen verursacht werden, die aufgrund anderer Faktoren auftreten.</span><span class="sxs-lookup"><span data-stu-id="735af-104">There are two types of corruption that can affect an Exchange database: physical corruption, which is typically caused by hardware (in particular, storage hardware) problems, and logical corruption, which occurs due to other factors.</span></span> <span data-ttu-id="735af-105">Im Allgemeinen gibt es zwei Arten von logischen Beschädigungen, die in einer Exchange-Datenbank auftreten können:</span><span class="sxs-lookup"><span data-stu-id="735af-105">Generally, there are two types of logical corruption that can occur within an Exchange database:</span></span> 
- <span data-ttu-id="735af-106">**Logische Beschädigung der Datenbank** – die Prüfsumme der Datenbankseite entspricht, aber die Daten auf der Seite sind logisch falsch.</span><span class="sxs-lookup"><span data-stu-id="735af-106">**Database logical corruption** - The database page checksum matches, but the data on the page is wrong logically.</span></span> <span data-ttu-id="735af-107">Dies kann vorkommen, wenn das Datenbankmodul (ESE) versucht, eine Datenbankseite zu schreiben, und obwohl das Betriebssystem eine Erfolgsmeldung zurückgibt, werden die Daten entweder nie auf den Datenträger geschrieben oder an die falsche Stelle geschrieben.</span><span class="sxs-lookup"><span data-stu-id="735af-107">This can occur when the database engine (the Extensible Storage Engine (ESE)) attempts to write a database page and even though the operating system returns a success message, the data is either never written to the disk or it's written to the wrong place.</span></span> <span data-ttu-id="735af-108">Dies wird als *verlorene Leerung* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="735af-108">This is referred to as a *lost flush*.</span></span> <span data-ttu-id="735af-109">ESE enthält zahlreiche Features und Schutzvorkehrungen, mit denen die physische Beschädigung einer Datenbank und anderer datenverlustszenarien verhindert werden soll.</span><span class="sxs-lookup"><span data-stu-id="735af-109">ESE includes numerous features and safeguards that are designed to prevent physical corruption of a database and other data loss scenarios.</span></span> <span data-ttu-id="735af-110">Um zu verhindern, dass verloren gegangene Daten gelöscht werden, enthält ESE einen Mechanismus zur Erkennung verlorener Leerungen in der Datenbank sowie ein Feature (Einzelseiten Wiederherstellung), um es zu korrigieren.</span><span class="sxs-lookup"><span data-stu-id="735af-110">To prevent lost flushes from losing data, ESE includes a lost flush detection mechanism in the database along with a feature (single page restore) to correct it.</span></span> 
- <span data-ttu-id="735af-111">**Logische Beschädigung des Speichers** – Daten werden auf eine Weise hinzugefügt, gelöscht oder manipuliert, die der Benutzer nicht erwartet.</span><span class="sxs-lookup"><span data-stu-id="735af-111">**Store logical corruption** - Data is added, deleted, or manipulated in a way that the user doesn't expect.</span></span> <span data-ttu-id="735af-112">Diese Fälle werden im Allgemeinen durch Anwendungen von Drittanbietern verursacht.</span><span class="sxs-lookup"><span data-stu-id="735af-112">These cases are generally caused by third-party applications.</span></span> <span data-ttu-id="735af-113">Es handelt sich im Allgemeinen nur insofern um eine Beschädigung, als der Benutzer sie als Beschädigung betrachtet.</span><span class="sxs-lookup"><span data-stu-id="735af-113">It's generally only corruption in the sense that the user views it as corruption.</span></span> <span data-ttu-id="735af-114">Der Exchange-Speicher betrachtet die Transaktion, die zur logischen Beschädigung geführt hat, als eine Folge gültiger MAPI-Operationen.</span><span class="sxs-lookup"><span data-stu-id="735af-114">The Exchange store considers the transaction that produced the logical corruption to be a series of valid MAPI operations.</span></span> <span data-ttu-id="735af-115">Die [in-situ-Speicherungs](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) Funktionen in Exchange Online bieten Schutz vor logischen Beschädigungen des Speichers (da dadurch verhindert wird, dass Inhalte dauerhaft von einem Benutzer oder einer Anwendung gelöscht werden).</span><span class="sxs-lookup"><span data-stu-id="735af-115">The [In-Place Hold](https://docs.microsoft.com/exchange/security-and-compliance/create-or-remove-in-place-holds) features in Exchange Online provides protection from store logical corruption (because it prevents content from being permanently deleted by a user or an application).</span></span> 

<span data-ttu-id="735af-116">Exchange Online führt während der Protokoll Überprüfung und der Protokollwiedergabe mehrere Konsistenzprüfungen für replizierte Protokolldateien durch.</span><span class="sxs-lookup"><span data-stu-id="735af-116">Exchange Online performs several consistency checks on replicated log files during both log inspection and log replay.</span></span> <span data-ttu-id="735af-117">Durch diese Konsistenzprüfungen wird verhindert, dass physische Beschädigungen vom System repliziert werden.</span><span class="sxs-lookup"><span data-stu-id="735af-117">These consistency checks prevent physical corruption from being replicated by the system.</span></span> <span data-ttu-id="735af-118">Beispielsweise gibt es bei der Protokoll Überprüfung eine physische Integritätsprüfung, die die Protokolldatei überprüft und überprüft, ob die in der Protokolldatei aufgezeichnete Prüfsumme mit der im Arbeitsspeicher generierten Prüfsumme übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="735af-118">For example, during log inspection, there is a physical integrity check which verifies the log file and validates that the checksum recorded in the log file matches the checksum generated in memory.</span></span> <span data-ttu-id="735af-119">Darüber hinaus wird der Protokolldateiheader überprüft, um sicherzustellen, dass die im Protokollheader aufgezeichnete Protokolldateisignatur mit der der Protokolldatei übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="735af-119">In addition, the log file header is examined to make sure the log file signature recorded in the log header matches that of the log file.</span></span> <span data-ttu-id="735af-120">Während der Protokollwiedergabe wird die Protokolldatei weiter überprüft.</span><span class="sxs-lookup"><span data-stu-id="735af-120">During log replay, the log file undergoes further scrutiny.</span></span> <span data-ttu-id="735af-121">Die Datenbankkopfzeile enthält beispielsweise auch die Protokollsignatur, die mit der Signatur der Protokolldatei verglichen wird, um sicherzustellen, dass Sie übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="735af-121">For example, the database header also contains the log signature which is compared with the log file's signature to ensure they match.</span></span> 

<span data-ttu-id="735af-122">Der Schutz vor Beschädigung von Postfachdaten in Exchange Online erfolgt mithilfe von Exchange Native Data Protection, einer Ausfall Sicherheitsstrategie, die die Replikation auf Anwendungsebene auf mehreren Servern und mehreren Rechenzentren zusammen mit anderen Features unterstützt, mit denen Daten aufgrund von Beschädigungen oder aus anderen Gründen vor dem Verlust geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="735af-122">Protection against corruption of mailbox data in Exchange Online is achieved by using Exchange Native Data Protection, a resiliency strategy that leverages application-level replication across multiple servers and multiple datacenters along with other features that help protect data from being lost due to corruption or other reasons.</span></span> <span data-ttu-id="735af-123">Diese Features umfassen systemeigene Features, die von Microsoft oder der Exchange Online Anwendung selbst verwaltet werden, beispielsweise:</span><span class="sxs-lookup"><span data-stu-id="735af-123">These features include native features that are managed by Microsoft or the Exchange Online application itself, such as:</span></span>

- [<span data-ttu-id="735af-124">Daten Verfügbarkeitsgruppen</span><span class="sxs-lookup"><span data-stu-id="735af-124">Data Availability Groups</span></span>](https://docs.microsoft.com/exchange/back-up-email)
- <span data-ttu-id="735af-125">Einzel Bit-Korrektur</span><span class="sxs-lookup"><span data-stu-id="735af-125">Single Bit Correction</span></span> 
- <span data-ttu-id="735af-126">Online-Daten Bank Scans</span><span class="sxs-lookup"><span data-stu-id="735af-126">Online Database Scanning</span></span> 
- <span data-ttu-id="735af-127">Erkennung der verlorenen Leerung</span><span class="sxs-lookup"><span data-stu-id="735af-127">Lost Flush Detection</span></span> 
- <span data-ttu-id="735af-128">Wiederherstellung einzelner Seiten</span><span class="sxs-lookup"><span data-stu-id="735af-128">Single Page Restore</span></span> 
- <span data-ttu-id="735af-129">Postfachreplikationsdienst</span><span class="sxs-lookup"><span data-stu-id="735af-129">Mailbox Replication Service</span></span> 
- <span data-ttu-id="735af-130">Protokolldatei Prüfungen</span><span class="sxs-lookup"><span data-stu-id="735af-130">Log File Checks</span></span> 
- <span data-ttu-id="735af-131">Bereitstellung auf einem widerstandsfähigen Datei System</span><span class="sxs-lookup"><span data-stu-id="735af-131">Deployment on Resilient File System</span></span> 

<span data-ttu-id="735af-132">Um weitere Informationen zu den oben aufgeführten systemeigenen Features zu erhalten, klicken Sie auf die obigen Hyperlinks, und lesen Sie weiter unten Weitere Informationen und Details zu Elementen ohne Hyperlinks.</span><span class="sxs-lookup"><span data-stu-id="735af-132">For more information on the native features listed above, click on the above hyperlinks, and see below for additional information and for details on items without hyperlinks.</span></span> <span data-ttu-id="735af-133">Zusätzlich zu diesen systemeigenen Features umfasst Exchange Online auch Datenausfall Sicherheitsfeatures, die Kunden verwalten können, beispielsweise:</span><span class="sxs-lookup"><span data-stu-id="735af-133">In addition to these native features, Exchange Online also includes data resiliency features that customers can manage, such as:</span></span> 
- [<span data-ttu-id="735af-134">Wiederherstellung einzelner Elemente (standardmäßig aktiviert)</span><span class="sxs-lookup"><span data-stu-id="735af-134">Single Item Recovery (enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/manage-user-mailboxes/recover-deleted-messages) 
- [<span data-ttu-id="735af-135">In-Situ-Speicher und Beweissicherungsverfahren</span><span class="sxs-lookup"><span data-stu-id="735af-135">In-Place Hold and Litigation Hold</span></span>](https://docs.microsoft.com/exchange/security-and-compliance/in-place-and-litigation-holds) 
- [<span data-ttu-id="735af-136">Aufbewahrungszeit für gelöschte Elemente und vorläufig gelöschte Postfächer (beide standardmäßig aktiviert)</span><span class="sxs-lookup"><span data-stu-id="735af-136">Deleted Item Retention and Soft-Deleted Mailboxes (both enabled by default)</span></span>](https://docs.microsoft.com/exchange/recipients-in-exchange-online/delete-or-restore-mailboxes) 

## <a name="database-availability-groups"></a><span data-ttu-id="735af-137">Datenbankverfügbarkeitsgruppen</span><span class="sxs-lookup"><span data-stu-id="735af-137">Database Availability Groups</span></span> 
<span data-ttu-id="735af-138">Jede Postfachdatenbank in Microsoft 365 wird in einer [Database Availability Group (DAG)](https://docs.microsoft.com/exchange/back-up-email) gehostet und in geografisch getrennte Rechenzentren innerhalb derselben Region repliziert.</span><span class="sxs-lookup"><span data-stu-id="735af-138">Every mailbox database in Microsoft 365 is hosted in a [database availability group (DAG)](https://docs.microsoft.com/exchange/back-up-email) and replicated to geographically-separate datacenters within the same region.</span></span> <span data-ttu-id="735af-139">Die häufigste Konfiguration besteht aus vier Datenbankkopien in vier Rechenzentren; Einige Regionen weisen jedoch weniger Rechenzentren auf (Datenbankenwerden in drei Rechenzentren in Indien und zwei Rechenzentren in Australien und Japan repliziert).</span><span class="sxs-lookup"><span data-stu-id="735af-139">The most common configuration is four database copies in four datacenters; however, some regions have fewer datacenters (databases are replicated to three datacenters in India, and two datacenters in Australia and Japan).</span></span> <span data-ttu-id="735af-140">In allen Fällen verfügt jede Postfachdatenbank über vier Kopien, die über mehrere Rechenzentren verteilt sind, wodurch sichergestellt ist, dass die Postfachdaten vor Software-, Hardware-und sogar Rechenzentrums Fehlern geschützt sind.</span><span class="sxs-lookup"><span data-stu-id="735af-140">But in all cases, every mailbox database has four copies that are distributed across multiple datacenters, thereby ensuring that mailbox data is protected from software, hardware, and even datacenter failures.</span></span> 

<span data-ttu-id="735af-141">Aus diesen vier Kopien werden drei als hoch verfügbar konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="735af-141">Out of these four copies, three of them are configured as highly available.</span></span> <span data-ttu-id="735af-142">Die vierte Kopie ist als [verzögerte Datenbankkopie](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies)konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="735af-142">The fourth copy is configured as a [lagged database copy](https://docs.microsoft.com/Exchange/high-availability/manage-ha/activate-lagged-db-copies).</span></span> <span data-ttu-id="735af-143">Die verzögerte Datenbankkopie ist nicht für die Wiederherstellung einzelner Postfächer oder Postfachelemente vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="735af-143">The lagged database copy is not intended for individual mailbox recovery or mailbox item recovery.</span></span> <span data-ttu-id="735af-144">Ihr Zweck besteht darin, einen Wiederherstellungsmechanismus für das seltene Ereignis von systemweiten, katastrophalen logischen Beschädigungen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="735af-144">Its purpose is to provide a recovery mechanism for the rare event of system-wide, catastrophic logical corruption.</span></span> 

<span data-ttu-id="735af-145">Verzögerte Datenbankkopien in Exchange Online werden mit einem siebentägigen Wiedergabe Verzögerungszeitraum von Protokolldateien konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="735af-145">Lagged database copies in Exchange Online are configured with a seven-day log file replay lag time.</span></span> <span data-ttu-id="735af-146">Darüber hinaus ist der Exchange-Wiedergabe Verzögerungs-Manager aktiviert, um die dynamische Protokolldateiwiedergabe für verzögerte Kopien bereitzustellen, damit verzögerte Datenbankkopien die Protokolldatei Vergrößerung selbst reparieren und verwalten können.</span><span class="sxs-lookup"><span data-stu-id="735af-146">In addition, the Exchange Replay Lag Manager is enabled to provide dynamic log file play down for lagged copies to allow lagged database copies to self-repair and manage log file growth.</span></span> <span data-ttu-id="735af-147">Obgleich verzögerte Datenbankkopien in Exchange Online verwendet werden, ist es wichtig zu verstehen, dass es sich dabei nicht um eine garantierte Sicherung des Zeitpunktes handelt.</span><span class="sxs-lookup"><span data-stu-id="735af-147">Although lagged database copies are used in Exchange Online, it is important to understand that they are not a guaranteed point-in-time backup.</span></span> <span data-ttu-id="735af-148">Verzögerte Datenbankkopien in Exchange Online weisen einen Verfügbarkeits Schwellenwert auf, der in der Regel um 90% liegt, da der Datenträger mit einer verzögerten Kopie aufgrund eines Datenträgerfehlers verloren geht, die verzögerte Kopie zu einer hoch verfügbaren Kopie wird (aufgrund der automatischen Wiedergabe), sowie die Zeiträume, in denen die verzögerte Datenbankkopie die Protokollwiedergabe Warteschlange neu erstellt.</span><span class="sxs-lookup"><span data-stu-id="735af-148">Lagged database copies in Exchange Online have an availability threshold, typically around 90%, due to periods where the disk containing a lagged copy is lost due to disk failure, the lagged copy becoming a highly-available copy (due to automatic play down), as well as the periods where the lagged database copy is re-building the log replay queue.</span></span> 

## <a name="transport-resilience"></a><span data-ttu-id="735af-149">Transport Ausfallsicherheit</span><span class="sxs-lookup"><span data-stu-id="735af-149">Transport Resilience</span></span> 
<span data-ttu-id="735af-150">Exchange Online umfasst zwei Features für die primäre Transport Flexibilität: Shadow-Redundanz und Sicherheitsnetz.</span><span class="sxs-lookup"><span data-stu-id="735af-150">Exchange Online includes two primary transport resilience features: Shadow Redundancy and Safety Net.</span></span> <span data-ttu-id="735af-151">Shadow-Redundanz hält eine redundante Kopie einer Nachricht während der Übertragung.</span><span class="sxs-lookup"><span data-stu-id="735af-151">Shadow Redundancy keeps a redundant copy of a message while it is in transit.</span></span> <span data-ttu-id="735af-152">Das Sicherheitsnetz speichert eine redundante Kopie einer Nachricht, nachdem die Nachricht erfolgreich zugestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="735af-152">Safety Net keeps a redundant copy of a message after the message is successfully delivered.</span></span> 

<span data-ttu-id="735af-153">Bei der Shadow-Redundanz erstellt jeder Exchange Online Transport Server eine Kopie jeder empfangenen Nachricht, bevor er den erfolgreichen Empfang der Nachricht an den sendenden Server bestätigt.</span><span class="sxs-lookup"><span data-stu-id="735af-153">With Shadow Redundancy, each Exchange Online transport server makes a copy of each message it receives before it acknowledges successfully receiving the message to the sending server.</span></span> <span data-ttu-id="735af-154">Dadurch sind alle Nachrichten in der Transportpipeline während der Übertragung redundant.</span><span class="sxs-lookup"><span data-stu-id="735af-154">This makes all messages in the transport pipeline redundant while in transit.</span></span> <span data-ttu-id="735af-155">Wenn Exchange Online feststellt, dass die ursprüngliche Nachricht während der Übertragung verloren ging, wird eine redundante Kopie der Nachricht erneut zugestellt.</span><span class="sxs-lookup"><span data-stu-id="735af-155">If Exchange Online determines the original message was lost in transit, a redundant copy of the message is redelivered.</span></span> 

<span data-ttu-id="735af-156">Safety Net ist eine Transportwarteschlange, die dem Transportdienst auf einem Postfachserver zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="735af-156">Safety Net is a transport queue that is associated with the Transport service on a Mailbox server.</span></span> <span data-ttu-id="735af-157">In dieser Warteschlange werden Kopien von Nachrichten gespeichert, die vom Server erfolgreich verarbeitet wurden.</span><span class="sxs-lookup"><span data-stu-id="735af-157">This queue stores copies of messages that were successfully processed by the server.</span></span> <span data-ttu-id="735af-158">Wenn für eine Postfachdatenbank oder einen Serverausfall eine veraltete Kopie der Postfachdatenbank aktiviert werden muss, werden Nachrichten in der Sicherheitsnetz Warteschlange automatisch erneut an die neue aktive Kopie der Postfachdatenbank übermittelt.</span><span class="sxs-lookup"><span data-stu-id="735af-158">When a mailbox database or server failure requires activating an out-of-date copy of the mailbox database, messages in the Safety Net queue are automatically resubmitted to the new active copy of the mailbox database.</span></span> <span data-ttu-id="735af-159">Das Sicherheitsnetz ist ebenfalls redundant, wodurch der Transport als einzelne Anlaufstellen eliminiert wird.</span><span class="sxs-lookup"><span data-stu-id="735af-159">Safety Net is also redundant, thereby eliminating transport as a single point of failure.</span></span> <span data-ttu-id="735af-160">Es verwendet das Konzept eines primär Sicherheitsnetzes und eines Shadow-Sicherheitsnetzes, wobei, wenn das primäre Sicherheitsnetz länger als 12 Stunden nicht verfügbar ist, Resubmit-Anforderungen zu Shadow Resubmit-Anforderungen werden und Nachrichten aus dem Shadow-Sicherheitsnetz erneut übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="735af-160">It uses the concept of a Primary Safety Net and a Shadow Safety Net wherein if the Primary Safety Net is unavailable for more than 12 hours, resubmit requests become shadow resubmit requests, and messages are re-delivered from the Shadow Safety Net.</span></span>

<span data-ttu-id="735af-161">Die erneute Übermittlung von Nachrichten aus dem Sicherheitsnetz wird automatisch von der Active Manager-Komponente des Microsoft Exchange Replikationsdiensts initiiert, der DAGs-und Postfachdatenbankkopien verwaltet.</span><span class="sxs-lookup"><span data-stu-id="735af-161">Message resubmissions from Safety Net are automatically initiated by the Active Manager component of the Microsoft Exchange Replication service that manages DAGs and mailbox database copies.</span></span> <span data-ttu-id="735af-162">Zum erneuten Übermitteln von Nachrichten aus dem Sicherheitsnetz sind keine manuellen Aktionen erforderlich.</span><span class="sxs-lookup"><span data-stu-id="735af-162">No manual actions are required to resubmit messages from Safety Net.</span></span> 

## <a name="single-bit-correction"></a><span data-ttu-id="735af-163">Einzel Bit-Korrektur</span><span class="sxs-lookup"><span data-stu-id="735af-163">Single Bit Correction</span></span> 
<span data-ttu-id="735af-164">ESE umfasst einen Mechanismus zum erkennen und lösen von CRC-Fehlern mit einem Bit (aka Single-Bit-Flips), die das Ergebnis von Hardwarefehlern sind (und als solche physische Beschädigungen darstellen).</span><span class="sxs-lookup"><span data-stu-id="735af-164">ESE includes a mechanism to detect and resolve single-bit CRC errors (aka single-bit flips) that are the result of hardware errors (and as such they represent physical corruption).</span></span> <span data-ttu-id="735af-165">Wenn diese Fehler auftreten, korrigiert ESE diese automatisch und protokolliert ein Ereignis im Ereignisprotokoll.</span><span class="sxs-lookup"><span data-stu-id="735af-165">When these errors occur, ESE automatically corrects them and logs an event in the event log.</span></span> 

## <a name="online-database-scanning"></a><span data-ttu-id="735af-166">Online-Daten Bank Scans</span><span class="sxs-lookup"><span data-stu-id="735af-166">Online Database Scanning</span></span> 
<span data-ttu-id="735af-167">Online-Daten Bank Scans (auch bekannt als *Datenbank-checksumming*) ist der Vorgang, bei dem eine ESE eine Datenbank-Konsistenzprüfung verwendet, um jede Seite zu lesen und auf Seiten Beschädigungen zu prüfen.</span><span class="sxs-lookup"><span data-stu-id="735af-167">Online database scanning (also known as *database checksumming*) is the process where an ESE uses a database consistency checker to read each page and check for page corruption.</span></span> <span data-ttu-id="735af-168">Der primäre Zweck besteht darin, physische Beschädigungen und verlorene Leerungen zu erkennen, die möglicherweise nicht durch transaktionale Vorgänge erkannt werden.</span><span class="sxs-lookup"><span data-stu-id="735af-168">The primary purpose is to detect physical corruption and lost flushes that may not be getting detected by transactional operations.</span></span> <span data-ttu-id="735af-169">Bei der Datenbankprüfung werden auch Absturz Vorgänge nach dem Speichern ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="735af-169">Database scanning also performs post-store crash operations.</span></span> <span data-ttu-id="735af-170">Der Speicherplatz kann aufgrund von Abstürzen durchgesickert sein, und die Online-Datenbankprüfung sucht und stellt verlorenen Speicherplatz wieder her.</span><span class="sxs-lookup"><span data-stu-id="735af-170">Space can be leaked due to crashes, and online database scanning finds and recovers lost space.</span></span> <span data-ttu-id="735af-171">Das System ist mit der Erwartung konzipiert, dass jede Datenbank einmal alle sieben Tage vollständig überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="735af-171">The system is designed with the expectation that every database is fully scanned once every seven days.</span></span> 

## <a name="lost-flush-detection"></a><span data-ttu-id="735af-172">Erkennung der verlorenen Leerung</span><span class="sxs-lookup"><span data-stu-id="735af-172">Lost Flush Detection</span></span> 
<span data-ttu-id="735af-173">Bei einem Datenbankschreibvorgang, bei dem das als abgeschlossen zurückgegebene Datenträgersubsystem/Betriebssystem nicht tatsächlich auf den Datenträger geschrieben oder an einem falschen Speicherort geschrieben wurde, tritt ein verlorener Flush auf.</span><span class="sxs-lookup"><span data-stu-id="735af-173">A lost flush occurs when a database write operation that the disk subsystem/operating system returned as completed did not actually get written to disk, or was written in the wrong location.</span></span> <span data-ttu-id="735af-174">Verloren gegangene Flush-Vorfälle können zu einer Daten Bank logischen Beschädigung führen, sodass ESE einen verlorenen Erkennungsmechanismus enthält, um zu verhindern, dass verloren gegangene Daten gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="735af-174">Lost flush incidents can result in database logical corruption, so to prevent lost flushes from resulting in lost data, ESE includes a lost flush detection mechanism.</span></span> <span data-ttu-id="735af-175">Wenn Datenbankseiten in passive Kopien geschrieben werden, erfolgt eine Überprüfung der verlorenen Leerungen in der aktiven Kopie.</span><span class="sxs-lookup"><span data-stu-id="735af-175">As database pages are written to passive copies, a check is performed for lost flushes on the active copy.</span></span> <span data-ttu-id="735af-176">Wenn ein verloren gegangene Flush erkannt wird, kann ESE den Prozess mithilfe eines Seiten Patchings reparieren.</span><span class="sxs-lookup"><span data-stu-id="735af-176">If a lost flush is detected, ESE can repair the process using a page patching process.</span></span> 

## <a name="single-page-restore"></a><span data-ttu-id="735af-177">Wiederherstellung einzelner Seiten</span><span class="sxs-lookup"><span data-stu-id="735af-177">Single Page Restore</span></span> 
<span data-ttu-id="735af-178">Die Wiederherstellung einzelner Seiten, aka *Page Patching*, ist ein automatischer Vorgang, bei dem beschädigte Datenbankseiten durch gesunde Kopien aus einem fehlerfreien Replikat ersetzt werden.</span><span class="sxs-lookup"><span data-stu-id="735af-178">Single page restore, aka *page patching*, is an automatic process where corrupt database pages are replaced by healthy copies from a healthy replica.</span></span> <span data-ttu-id="735af-179">Der Reparaturprozess für eine beschädigte Seite hängt davon ab, ob die Datenbankkopie aktiv oder passiv ist.</span><span class="sxs-lookup"><span data-stu-id="735af-179">The repair process for a corrupt page depends on whether the database copy is active or passive.</span></span> <span data-ttu-id="735af-180">Wenn eine aktive Datenbankkopie auf eine beschädigte Seite stößt, kann Sie eine Seite aus einem ihrer Replikate kopieren, vorausgesetzt, die kopierte Seite ist vollständig auf dem neuesten Stand.</span><span class="sxs-lookup"><span data-stu-id="735af-180">When an active database copy encounters a corrupted page, it can copy a page from one of its replicas, provided the page it copies is completely up-to-date.</span></span> <span data-ttu-id="735af-181">Dies wird erreicht, indem eine Anforderung für die Seite in den Protokolldatenstrom gestellt wird, der die Basis für die Replikation der Postfachdatenbank ist.</span><span class="sxs-lookup"><span data-stu-id="735af-181">This is accomplished by putting a request for the page into the log stream, which is the basis of mailbox database replication.</span></span> <span data-ttu-id="735af-182">Sobald ein Replikat die Seitenanforderung findet, antwortet es, indem es eine Kopie der Seite an die anfordernde Datenbankkopie sendet.</span><span class="sxs-lookup"><span data-stu-id="735af-182">As soon as a replica encounters the page request it responds by sending a copy of the page to the requesting database copy.</span></span> <span data-ttu-id="735af-183">Die Wiederherstellung einzelner Seiten stellt auch einen asynchronen Kommunikationsmechanismus bereit, mit dem Active eine Seite von Replikaten anfordern kann, selbst wenn die Replikate derzeit offline sind.</span><span class="sxs-lookup"><span data-stu-id="735af-183">Single page restore also provides an asynchronous communication mechanism for the active to request a page from replicas, even if the replicas are currently offline.</span></span> 

<span data-ttu-id="735af-184">Bei Beschädigungen in einer passiven Datenbankkopie, einschließlich einer verzögerten Datenbankkopie, da diese Kopien immer hinter ihrer aktiven Kopie stehen, ist es immer sicher, eine Seite aus der aktiven Kopie in eine passive Kopie zu kopieren.</span><span class="sxs-lookup"><span data-stu-id="735af-184">In case of corruption in a passive database copy, including a lagged database copy, because these copies are always behind their active copy, it is always safe to copy any page from the active copy to a passive copy.</span></span> <span data-ttu-id="735af-185">Eine passive Datenbankkopie ist von Natur aus hoch verfügbar, daher wird beim Patchen von Seiten die Protokollwiedergabe angehalten, aber der Protokollkopiervorgang wird fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="735af-185">A passive database copy is by nature highly available, so during the page patching process, log replaying is suspended, but log copying continues.</span></span> <span data-ttu-id="735af-186">Die passive Datenbankkopie Ruft eine Kopie der beschädigten Seite aus der aktiven Kopie ab und wartet, bis die Protokolldatei, die die maximal erforderliche Protokoll Generierungs Anforderung erfüllt, kopiert und überprüft wird, und dann die beschädigte Seite Patches.</span><span class="sxs-lookup"><span data-stu-id="735af-186">The passive database copy retrieves a copy of the corrupted page from the active copy, waits until the log file which meets the maximum required log generation requirement is copied and inspected, and then patches the corrupt page.</span></span> <span data-ttu-id="735af-187">Nachdem die Seite gepatcht wurde, wird die Protokollwiedergabe fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="735af-187">Once the page has been patched, log replay resumes.</span></span> <span data-ttu-id="735af-188">Der Prozess ist für die verzögerte Datenbankkopie identisch, mit dem Unterschied, dass die verzögerte Datenbank zunächst alle Protokolldateien wiedergibt, die zum Erreichen eines patchable-Status erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="735af-188">The process is the same for the lagged database copy, except that the lagged database first replays all log files that are necessary to achieve a patchable state.</span></span> 

## <a name="mailbox-replication-service"></a><span data-ttu-id="735af-189">Postfachreplikationsdienst</span><span class="sxs-lookup"><span data-stu-id="735af-189">Mailbox Replication Service</span></span> 
<span data-ttu-id="735af-190">Das Verschieben von Postfächern ist ein wichtiger Bestandteil der Verwaltung eines umfangreichen e-Mail-Diensts.</span><span class="sxs-lookup"><span data-stu-id="735af-190">Moving mailboxes is a key part of managing a large-scale email service.</span></span> <span data-ttu-id="735af-191">Es gibt immer aktualisierte Technologien und Hardware-und Versionsupgrades, mit einem robusten, gedrosselten System, mit dem unsere Techniker diese Aufgaben durchführen können, während die Postfachverschiebungen für Benutzer transparent sind (indem Sie sicherstellen, dass Sie während des gesamten Prozesses online bleiben) und sicherstellen, dass der Prozess ordnungsgemäß skaliert wird, wenn die Postfächer immer größer werden.</span><span class="sxs-lookup"><span data-stu-id="735af-191">There are always updated technologies and hardware and version upgrades to deal with, so having a robust, throttled system that enables our engineers to accomplish this work while keeping the mailbox moves transparent to users (by making sure they stay online throughout the process) is key and making sure that the process scales up gracefully as mailboxes get larger and larger.</span></span> 

<span data-ttu-id="735af-192">Der Exchange-Postfachreplikationsdienst (Mrs) ist für das Verschieben von Postfächern zwischen Datenbanken zuständig.</span><span class="sxs-lookup"><span data-stu-id="735af-192">The Exchange Mailbox Replication Service (MRS) is responsible for moving mailboxes between databases.</span></span> <span data-ttu-id="735af-193">Während des Wechsels führt Mrs eine Konsistenzprüfung für alle Elemente im Postfach aus.</span><span class="sxs-lookup"><span data-stu-id="735af-193">During the move, MRS performs a consistency check on all items within the mailbox.</span></span> <span data-ttu-id="735af-194">Wenn ein Konsistenzproblem gefunden wird, korrigiert Mrs das Problem entweder oder überspringt die beschädigten Elemente, wodurch die Beschädigung aus dem Postfach entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="735af-194">If a consistency issue is found, MRS will either correct the problem, or skip the corrupted items, thereby removing the corruption from the mailbox.</span></span> 

<span data-ttu-id="735af-195">Da Mrs eine Komponente von Exchange Online ist, können wir Änderungen an Ihrem Code vornehmen, um neue Formen von Beschädigungen zu beheben, die in der Zukunft erkannt werden.</span><span class="sxs-lookup"><span data-stu-id="735af-195">Because MRS is a component of Exchange Online, we can make changes in its code to address new forms of corruption that are detected in the future.</span></span> <span data-ttu-id="735af-196">Wenn wir beispielsweise ein Konsistenzproblem feststellen, das Mrs nicht beheben kann, können wir die Beschädigung analysieren, den Mrs-Code ändern und die Inkonsistenz korrigieren (wenn wir verstehen, wie dies der Fall ist).</span><span class="sxs-lookup"><span data-stu-id="735af-196">For example, if we detect a consistency issue that MRS is not able to fix, we can analyze the corruption, change the MRS code and correct the inconsistency (if we understand how to).</span></span> 

## <a name="log-file-checks"></a><span data-ttu-id="735af-197">Protokolldatei Prüfungen</span><span class="sxs-lookup"><span data-stu-id="735af-197">Log File Checks</span></span> 
<span data-ttu-id="735af-198">Alle Transaktionsprotokolldateien, die von einer Exchange-Datenbank generiert werden, werden mehreren Arten von Konsistenzprüfungen unterzogen.</span><span class="sxs-lookup"><span data-stu-id="735af-198">All transaction log files generated by an Exchange database undergo several forms of consistency checks.</span></span> <span data-ttu-id="735af-199">Wenn eine Protokolldatei erstellt wird, wird als erstes ein Bitmuster geschrieben, und dann wird eine Reihe von Protokollschreib Vorgängen ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="735af-199">When a log file is created, the first thing done is a bit pattern is written and then a series of log writes is performed.</span></span> <span data-ttu-id="735af-200">Auf diese Weise können Exchange Online eine Reihe von Prüfungen (Flush, CRC und andere Prüfungen) ausführen, um jede Protokolldatei so zu validieren, wie Sie geschrieben wurde, und erneut, während Sie repliziert wird.</span><span class="sxs-lookup"><span data-stu-id="735af-200">This enables Exchange Online to execute a series of checks (lost flush, CRC and other checks) to validate each log file as it is written, and again as it is replicated.</span></span> 

## <a name="deployment-on-resilient-file-system"></a><span data-ttu-id="735af-201">Bereitstellung auf einem widerstandsfähigen Datei System</span><span class="sxs-lookup"><span data-stu-id="735af-201">Deployment on Resilient File System</span></span> 
<span data-ttu-id="735af-202">Um zu verhindern, dass Beschädigungen auf Dateisystemebene auftreten, werden Exchange Online auf ReFS-Partitionen bereitgestellt, um verbesserte Wiederherstellungsfunktionen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="735af-202">To help prevent corruption from occurring at the file system level, Exchange Online is being deployed on Resilient File System (ReFS) partitions to provide improved recovery capabilities.</span></span> <span data-ttu-id="735af-203">ReFS ist ein Dateisystem in Windows Server 2012 und höher, das so konzipiert ist, dass es widerstandsfähiger gegen Datenbeschädigungen ist, wodurch die Verfügbarkeit und Integrität der Daten maximiert wird.</span><span class="sxs-lookup"><span data-stu-id="735af-203">ReFS is a file system in Windows Server 2012 and later that is designed to be more resilient against data corruption thereby maximizing data availability and integrity.</span></span> <span data-ttu-id="735af-204">Konkret bringt ReFS Verbesserungen bei der Art und Weise, wie Metadaten aktualisiert werden, wodurch Daten besser geschützt werden und Daten Korruptionsfälle reduziert werden.</span><span class="sxs-lookup"><span data-stu-id="735af-204">Specifically, ReFS brings improvements in the way that metadata is updated which offers better protection for data and reduces data corruption cases.</span></span> <span data-ttu-id="735af-205">Außerdem werden Prüfsummen verwendet, um die Integrität von Dateidaten und Metadaten zu überprüfen, um sicherzustellen, dass die Datenbeschädigung problemlos gefunden und repariert werden kann.</span><span class="sxs-lookup"><span data-stu-id="735af-205">It also uses checksums to verify the integrity of file data and metadata ensuring that data corruption is easily found and repaired.</span></span> 

<span data-ttu-id="735af-206">Exchange Online nutzt mehrere ReFS-Vorteile:</span><span class="sxs-lookup"><span data-stu-id="735af-206">Exchange Online takes advantage of several ReFS benefits:</span></span> 
- <span data-ttu-id="735af-207">Mehr Ausfallsicherheit in der Datenintegrität bedeutet weniger Daten Beschädigungs Vorfälle.</span><span class="sxs-lookup"><span data-stu-id="735af-207">More resiliency in data integrity means fewer data corruption incidents.</span></span> <span data-ttu-id="735af-208">Das Reduzieren der Anzahl von Beschädigungs Vorfällen bedeutet weniger unnötige Daten Bank reseeds.</span><span class="sxs-lookup"><span data-stu-id="735af-208">Reducing the number of corruption incidents means fewer unnecessary database reseeds.</span></span> 
- <span data-ttu-id="735af-209">Prüfsumme, die auf Metadaten ausgeführt wird, sodass Erkennungen von Beschädigungs Fällen schneller und deterministischer möglich werden, sodass die Beschädigung von Kundendaten behoben werden kann, bevor graue Fehler auf Datenvolumen auftreten.</span><span class="sxs-lookup"><span data-stu-id="735af-209">Checksum running on metadata enabling detections of corruption cases sooner and more deterministically, allowing us to fix customer data corruption before grey failures occur on data volumes.</span></span>
- <span data-ttu-id="735af-210">Entwickelt für eine gute Zusammenarbeit mit extrem großen Datasets – Petabyte und größer – ohne Leistungseinbußen</span><span class="sxs-lookup"><span data-stu-id="735af-210">Designed to work well with extremely large data sets—petabytes and larger—without performance impact</span></span>
- <span data-ttu-id="735af-211">Unterstützung für andere von Exchange Online verwendete Features, wie die BitLocker-Verschlüsselung.</span><span class="sxs-lookup"><span data-stu-id="735af-211">Support for other features used by Exchange Online, such as BitLocker encryption.</span></span> 

<span data-ttu-id="735af-212">Exchange Online profitiert auch von anderen ReFS-Features:</span><span class="sxs-lookup"><span data-stu-id="735af-212">Exchange Online also benefits from other ReFS features:</span></span> 
- <span data-ttu-id="735af-213">**Integrity (Integrity Streams)** -ReFS speichert Daten so, dass Sie vor vielen gängigen Fehlern geschützt werden, die normalerweise zu Datenverlusten führen können.</span><span class="sxs-lookup"><span data-stu-id="735af-213">**Integrity (Integrity Streams)** - ReFS stores data in a way that protects it from many of the common errors that can normally cause data loss.</span></span> <span data-ttu-id="735af-214">Die Microsoft 365-Suche verwendet Integritätsdaten Ströme zur Unterstützung der frühzeitigen Festplatten-Beschädigungserkennung und der Prüfsummen von Dateiinhalten.</span><span class="sxs-lookup"><span data-stu-id="735af-214">Microsoft 365 Search uses Integrity Streams to help with early disk corruption detection and checksums of file content.</span></span> <span data-ttu-id="735af-215">Das Feature reduziert außerdem Beschädigungs Ereignisse, die durch "gerissene Schreibvorgänge" verursacht werden (wenn ein Schreibvorgang aufgrund von Stromausfällen nicht abgeschlossen wird usw.).</span><span class="sxs-lookup"><span data-stu-id="735af-215">The feature also reduces corruption incidents caused by “Torn Writes” (when a write operation does not complete due to power outages, etc.).</span></span> 
- <span data-ttu-id="735af-216">**Verfügbarkeit (Restwert)** -ReFS priorisiert die Verfügbarkeit von Daten.</span><span class="sxs-lookup"><span data-stu-id="735af-216">**Availability (Salvage)** - ReFS prioritizes the availability of data.</span></span> <span data-ttu-id="735af-217">In der Vergangenheit waren Dateisysteme häufig anfällig für Datenbeschädigungen, die erfordern, dass das System zur Reparatur offline geschaltet würde.</span><span class="sxs-lookup"><span data-stu-id="735af-217">Historically, file systems were often susceptible to data corruption that would require the system to be taken offline for repair.</span></span> <span data-ttu-id="735af-218">Obwohl selten, wenn eine Beschädigung auftritt, ReFS implementiert Bergung, ein Feature, das die beschädigten Daten aus dem Namespace auf einem Live-Volume entfernt und sichergestellt, dass gute Daten nicht durch nicht reparierbar beschädigte Daten beeinträchtigt wird.</span><span class="sxs-lookup"><span data-stu-id="735af-218">Although rare, if corruption does occur, ReFS implements salvage, a feature that removes the corrupt data from the namespace on a live volume and ensures that good data is not adversely affected by non-repairable corrupt data.</span></span> <span data-ttu-id="735af-219">Durch die Anwendung des Bergungs Features und das Isolieren von Datenbeschädigungen auf Exchange Online Daten Bank Volumes können wir nicht betroffene Datenbanken auf einem beschädigten Volume zwischen dem Zeitpunkt der Beschädigung und der Reparaturaktion aufbewahren.</span><span class="sxs-lookup"><span data-stu-id="735af-219">Applying the Salvage feature and isolating data corruption to Exchange Online database volumes means that we can keep non-affected databases on a corrupted volume healthy between the time of corruption and repair action.</span></span> <span data-ttu-id="735af-220">Dadurch wird die Verfügbarkeit von Datenbanken erhöht, die normalerweise von solchen Datenträgerbeschädigungen betroffen wären.</span><span class="sxs-lookup"><span data-stu-id="735af-220">This increases the availability of databases that would normally be affected by such disk corruption issues.</span></span> 