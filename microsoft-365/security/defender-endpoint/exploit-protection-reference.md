---
title: Referenz zum Exploit-Schutz
keywords: Risikominderungen, Sicherheitsrisiken, Sicherheitsrisiken, Gegenmaßnahmen, Exploits, Exploits, emet
description: Details zur Funktionsweise des Exploitschutzfeatures in Windows 10
search.product: eADQiWindows 10XVcnh
ms.pagetype: security
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
localization_priority: Normal
audience: ITPro
author: denisebmsft
ms.author: deniseb
ms.date: 01/06/2021
ms.reviewer: cjacks
manager: dansimp
ms.custom: asr
ms.technology: mde
ms.topic: article
ms.openlocfilehash: a87215b0e23d56a73259bbee4600ec9e15a27f3b
ms.sourcegitcommit: dcb97fbfdae52960ae62b6faa707a05358193ed5
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/25/2021
ms.locfileid: "51199345"
---
# <a name="exploit-protection-reference"></a><span data-ttu-id="36f31-104">Exploit-Schutzreferenz</span><span class="sxs-lookup"><span data-stu-id="36f31-104">Exploit Protection Reference</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../../includes/microsoft-defender.md)]


<span data-ttu-id="36f31-105">**Gilt für:**</span><span class="sxs-lookup"><span data-stu-id="36f31-105">**Applies to:**</span></span>
- [<span data-ttu-id="36f31-106">Microsoft Defender für Endpunkt</span><span class="sxs-lookup"><span data-stu-id="36f31-106">Microsoft Defender for Endpoint</span></span>](https://go.microsoft.com/fwlink/?linkid=2154037)
- [<span data-ttu-id="36f31-107">Microsoft 365 Defender</span><span class="sxs-lookup"><span data-stu-id="36f31-107">Microsoft 365 Defender</span></span>](https://go.microsoft.com/fwlink/?linkid=2118804)

><span data-ttu-id="36f31-108">Möchten Sie Microsoft Defender for Endpoint erleben?</span><span class="sxs-lookup"><span data-stu-id="36f31-108">Want to experience Microsoft Defender for Endpoint?</span></span> [<span data-ttu-id="36f31-109">Registrieren Sie sich für eine kostenlose Testversion.</span><span class="sxs-lookup"><span data-stu-id="36f31-109">Sign up for a free trial.</span></span>](https://www.microsoft.com/microsoft-365/windows/microsoft-defender-atp?ocid=docs-wdatp-enablesiem-abovefoldlink)

<span data-ttu-id="36f31-110">Exploit-Schutz bietet erweiterte Schutzmöglichkeiten für Anwendungen, die von der IT-Pro angewendet werden können, nachdem der Entwickler die Software kompiliert und verteilt hat.</span><span class="sxs-lookup"><span data-stu-id="36f31-110">Exploit protection provides advanced protections for applications that the IT Pro can apply after the developer has compiled and distributed the software.</span></span>

<span data-ttu-id="36f31-111">Dieser Artikel hilft Ihnen zu verstehen, wie Exploitschutz sowohl auf Richtlinienebene als auch auf der ebene der einzelnen Gegenmaßnahmen funktioniert, um Sie bei der erfolgreichen Erstellung und Anwendung von Exploit Protection-Richtlinien zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="36f31-111">This article helps you understand how exploit protection works, both at the policy level and at the individual mitigation level, to help you successfully build and apply Exploit Protection policies.</span></span>

## <a name="how-mitigations-are-applied"></a><span data-ttu-id="36f31-112">Anwendung von Gegenmaßnahmen</span><span class="sxs-lookup"><span data-stu-id="36f31-112">How mitigations are applied</span></span>

<span data-ttu-id="36f31-113">Exploit Protection-Gegenmaßnahmen werden pro Anwendung angewendet.</span><span class="sxs-lookup"><span data-stu-id="36f31-113">Exploit Protection mitigations are applied per application.</span></span>

<span data-ttu-id="36f31-114">Gegenmaßnahmen werden über einen Registrierungseintrag für jedes Programm konfiguriert, für das Sie Schutzmaßnahmen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="36f31-114">Mitigations are configured via a registry entry for each program that you configure protections for.</span></span> <span data-ttu-id="36f31-115">Diese Einstellungen werden im **Registrierungseintrag MitigationOptions** für jedes Programm gespeichert (**HKEY_LOCAL_MACHINE \ SOFTWARE \ Microsoft \ Windows NT \ CurrentVersion \ Image File Execution Options \ *ImageFileName* \ MitigationOptions**).</span><span class="sxs-lookup"><span data-stu-id="36f31-115">These settings are stored in the **MitigationOptions** registry entry for each program (**HKEY_LOCAL_MACHINE \ SOFTWARE \ Microsoft \ Windows NT \ CurrentVersion \ Image File Execution Options \ *ImageFileName* \ MitigationOptions**).</span></span> <span data-ttu-id="36f31-116">Sie werden wirksam, wenn Sie das Programm neu starten und wirksam bleiben, bis Sie es ändern und das Programm erneut starten.</span><span class="sxs-lookup"><span data-stu-id="36f31-116">They take effect when you restart the program and remain effective until you change them and restart the program again.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="36f31-117">Mit den Ausführungsoptionen für Bilddatei können Sie nur einen Dateinamen oder Pfad und keine Versionsnummer, Architektur oder einen anderen Differentiator angeben.</span><span class="sxs-lookup"><span data-stu-id="36f31-117">Image File Execution Options only allows you to specify a file name or path, and not a version number, architecture, or any other differentiator.</span></span> <span data-ttu-id="36f31-118">Achten Sie darauf, Gegenmaßnahmen auf Apps mit eindeutigen Namen oder Pfaden zu verwenden, indem Sie sie nur auf Geräten anwenden, auf denen Sie diese Version und die Architektur der Anwendung getestet haben.</span><span class="sxs-lookup"><span data-stu-id="36f31-118">Be careful to target mitigations to apps which have unique names or paths, applying them only on devices where you have tested that version and that architecture of the application.</span></span>

<span data-ttu-id="36f31-119">Wenn Sie Exploitschutzminderungen mithilfe einer XML-Konfigurationsdatei konfigurieren, entweder über PowerShell, Gruppenrichtlinie oder MDM, werden bei der Verarbeitung dieser XML-Konfigurationsdatei individuelle Registrierungseinstellungen für Sie konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="36f31-119">If you configure exploit protection mitigations using an XML configuration file, either via PowerShell, Group Policy, or MDM, when processing this XML configuration file, individual registry settings will be configured for you.</span></span>

<span data-ttu-id="36f31-120">Wenn die Richtlinie, die die XML-Datei verteilt, nicht mehr erzwungen wird, werden die von dieser XML-Konfigurationsdatei bereitgestellten Einstellungen nicht automatisch entfernt.</span><span class="sxs-lookup"><span data-stu-id="36f31-120">When the policy distributing the XML file is no longer enforced, settings deployed by this XML configuration file will not be automatically removed.</span></span> <span data-ttu-id="36f31-121">Um Exploit Protection-Einstellungen zu entfernen, exportieren Sie die XML-Konfiguration von einem bereinigen Windows 10 Gerät, und stellen Sie diese neue XML-Datei zur Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="36f31-121">To remove Exploit Protection settings, export the XML configuration from a clean Windows 10 device, and deploy this new XML file.</span></span> <span data-ttu-id="36f31-122">Alternativ bietet Microsoft eine XML-Datei als Teil der Windows-Sicherheit Baselines zum Zurücksetzen von Exploit Protection-Einstellungen.</span><span class="sxs-lookup"><span data-stu-id="36f31-122">Alternately, Microsoft provides an XML file as part of the Windows Security Baselines for resetting Exploit Protection settings.</span></span>

<span data-ttu-id="36f31-123">Zum Zurücksetzen von Exploitschutzeinstellungen mithilfe von PowerShell können Sie den folgenden Befehl verwenden:</span><span class="sxs-lookup"><span data-stu-id="36f31-123">To reset exploit protection settings using PowerShell, you could use the following command:</span></span>

```powershell
Set-ProcessMitigation -PolicyFilePath EP-reset.xml
```
<span data-ttu-id="36f31-124">Im Folgenden finden Sie EP-reset.xml, die mit den Windows-Sicherheit werden:</span><span class="sxs-lookup"><span data-stu-id="36f31-124">Following is the EP-reset.xml distributed with the Windows Security Baselines:</span></span>
```xml
<?xml version="1.0" encoding="UTF-8"?>
<MitigationPolicy>
  <AppConfig Executable="ONEDRIVE.EXE">
    <DEP OverrideDEP="false" />
    <ASLR OverrideRelocateImages="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
    <ImageLoad OverrideBlockRemoteImages="false" />
  </AppConfig>
  <AppConfig Executable="firefox.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
  </AppConfig>
  <AppConfig Executable="fltldr.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
    <ImageLoad OverrideBlockRemoteImages="false" />
    <ChildProcess OverrideChildProcess="false" />
  </AppConfig>
  <AppConfig Executable="GROOVE.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
    <ImageLoad OverrideBlockRemoteImages="false" />
    <ChildProcess OverrideChildProcess="false" />
  </AppConfig>
  <AppConfig Executable="Acrobat.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="AcroRd32.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="chrome.exe">
    <DEP OverrideDEP="false" />
  </AppConfig>
  <AppConfig Executable="EXCEL.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="iexplore.exe">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="INFOPATH.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="java.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="javaw.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="javaws.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="LYNC.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="MSACCESS.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="MSPUB.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="OIS.EXE">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="OUTLOOK.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="plugin-container.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="POWERPNT.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="PPTVIEW.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="VISIO.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="VPREVIEW.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="WINWORD.EXE">
    <DEP OverrideDEP="false" />
    <ASLR ForceRelocateImages="true" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="wmplayer.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
  <AppConfig Executable="wordpad.exe">
    <DEP OverrideDEP="false" />
    <Payload OverrideEnableExportAddressFilter="false" OverrideEnableExportAddressFilterPlus="false" OverrideEnableImportAddressFilter="false" OverrideEnableRopStackPivot="false" OverrideEnableRopCallerCheck="false" OverrideEnableRopSimExec="false" />
  </AppConfig>
</MitigationPolicy>
```

## <a name="mitigation-reference"></a><span data-ttu-id="36f31-125">Referenz zur Risikominderung</span><span class="sxs-lookup"><span data-stu-id="36f31-125">Mitigation Reference</span></span>

<span data-ttu-id="36f31-126">In den folgenden Abschnitten werden die von den einzelnen Schutzmaßnahmen gegen Exploits bereitgestellten Schutzmaßnahmen, die Kompatibilitätsüberlegungen für die Gegenmaßnahmen und die verfügbaren Konfigurationsoptionen beschrieben.</span><span class="sxs-lookup"><span data-stu-id="36f31-126">The following sections detail the protections provided by each exploit protection mitigation, the compatibility considerations for the mitigation, and the configuration options available.</span></span>

## <a name="arbitrary-code-guard"></a><span data-ttu-id="36f31-127">Beliebiger Code guard</span><span class="sxs-lookup"><span data-stu-id="36f31-127">Arbitrary code guard</span></span>

### <a name="description"></a><span data-ttu-id="36f31-128">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-128">Description</span></span>

<span data-ttu-id="36f31-129">Beliebiger Codeschutz schützt vor böswilligen Angreifern, die den Code ihrer Wahl durch eine Speichersicherheitslücke in den Arbeitsspeicher laden und diesen Code ausführen können.</span><span class="sxs-lookup"><span data-stu-id="36f31-129">Arbitrary code guard helps protect against a malicious attacker loading the code of their choice into memory through a memory safety vulnerability and being able to execute that code.</span></span>

<span data-ttu-id="36f31-130">Arbitrary code guard schützt eine Anwendung vor der Ausführung dynamisch generierten Codes (Code, der nicht geladen wird, z. B. aus der exe selbst oder einer DLL).</span><span class="sxs-lookup"><span data-stu-id="36f31-130">Arbitrary code guard protects an application from executing dynamically generated code (code that is not loaded, for example, from the exe itself or a dll).</span></span> <span data-ttu-id="36f31-131">Beliebiger Codeschutz funktioniert, indem verhindert wird, dass der Arbeitsspeicher als ausführbare Datei markiert wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-131">Arbitrary code guard works by preventing memory from being marked as executable.</span></span> <span data-ttu-id="36f31-132">Wenn eine Anwendung versucht, Arbeitsspeicher [zuzuordnen,](https://docs.microsoft.com/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc)überprüfen wir die Schutzflags.</span><span class="sxs-lookup"><span data-stu-id="36f31-132">When an application attempts to [allocate memory](https://docs.microsoft.com/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), we check the protection flags.</span></span> <span data-ttu-id="36f31-133">(Speicher kann mit Schutzflags für Lese-, Schreib- und/oder Ausführungsschutz zugewiesen werden.) Wenn die Zuordnung versucht, [](https://docs.microsoft.com/windows/win32/memory/memory-protection-constants) das Flag für den Ausführungsschutz zu verwenden, schlägt die Speicherzuordnung fehl und gibt einen Fehlercode (STATUS_DYNAMIC_CODE_BLOCKED).</span><span class="sxs-lookup"><span data-stu-id="36f31-133">(Memory can be allocated with read, write, and/or execute protection flags.) If the allocation attempts to include the [*execute*](https://docs.microsoft.com/windows/win32/memory/memory-protection-constants) protection flag, then the memory allocation fails and returns an error code (STATUS_DYNAMIC_CODE_BLOCKED).</span></span> <span data-ttu-id="36f31-134">Ebenso schlägt die Berechtigungsänderung [](https://docs.microsoft.com/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) fehl, wenn eine Anwendung versucht, die [](https://docs.microsoft.com/windows/win32/memory/memory-protection-constants) Schutzflags des bereits zugewiesenen Speichers zu ändern, der bereits zugewiesen wurde und das Execute Protection-Flag enthält, und gibt einen Fehlercode (STATUS_DYNAMIC_CODE_BLOCKED).</span><span class="sxs-lookup"><span data-stu-id="36f31-134">Similarly, if an application attempts to [change the protection flags of memory](https://docs.microsoft.com/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) that has already been allocated and includes the [*execute*](https://docs.microsoft.com/windows/win32/memory/memory-protection-constants) protection flag, then the permission change fails and returns an error code (STATUS_DYNAMIC_CODE_BLOCKED).</span></span>

<span data-ttu-id="36f31-135">Indem verhindert  wird, dass das Ausführungsflag festgelegt wird, kann das Feature zur Verhinderung von Datenausführung von Windows 10 dann vor dem Anweisungszeiger schützen, der auf diesen Speicher festgelegt wird, und diesen Code ausführen.</span><span class="sxs-lookup"><span data-stu-id="36f31-135">By preventing the *execute* flag from being set, the data execution prevention feature of Windows 10 can then protect against the instruction pointer being set to that memory and running that code.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-136">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-136">Compatibility considerations</span></span>

<span data-ttu-id="36f31-137">Arbitrary Code Guard verhindert die Zuweisung von Arbeitsspeicher als ausführbare Datei, was ein Kompatibilitätsproblem mit Ansätzen wie Just-in-Time(JIT)-Compilern zur Verfügung stellt.</span><span class="sxs-lookup"><span data-stu-id="36f31-137">Arbitrary code guard prevents allocating any memory as executable, which presents a compatibility issue with approaches such as Just-in-Time (JIT) compilers.</span></span> <span data-ttu-id="36f31-138">Die meisten modernen Browser kompilieren beispielsweise JavaScript in systemeigenen Code, um die Leistung zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="36f31-138">Most modern browsers, for example, will compile JavaScript into native code in order to optimize performance.</span></span> <span data-ttu-id="36f31-139">Um diese Risikominderung zu unterstützen, müssen sie neu entwickelt werden, um die JIT-Kompilierung außerhalb des geschützten Prozesses zu verschieben.</span><span class="sxs-lookup"><span data-stu-id="36f31-139">In order to support this mitigation, they will need to be rearchitected to move the JIT compilation outside of the protected process.</span></span> <span data-ttu-id="36f31-140">Andere Anwendungen, deren Entwurf dynamisch Code aus Skripts oder anderen Zwischensprachen generiert, sind ähnlich inkompatibel mit dieser Gegenmaßnahmen.</span><span class="sxs-lookup"><span data-stu-id="36f31-140">Other applications whose design dynamically generates code from scripts or other intermediate languages will be similarly incompatible with this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-141">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-141">Configuration options</span></span>

<span data-ttu-id="36f31-142">**Thread-Opt-Out** zulassen – Sie können die Gegenmaßnahmen so konfigurieren, dass ein einzelner Thread diesen Schutz abmeldet.</span><span class="sxs-lookup"><span data-stu-id="36f31-142">**Allow thread opt-out** - You can configure the mitigation to allow an individual thread to opt-out of this protection.</span></span> <span data-ttu-id="36f31-143">Der Entwickler muss die Anwendung im Bewusstsein dieser Gegenmaßnahmen geschrieben und die [**SetThreadInformation-API**](https://docs.microsoft.com/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadinformation) aufgerufen haben, der *ThreadInformation-Parameter* ist auf **ThreadDynamicCodePolicy** festgelegt, um dynamischen Code in diesem Thread ausführen zu können.</span><span class="sxs-lookup"><span data-stu-id="36f31-143">The developer must have written the application with awareness of this mitigation, and have called the [**SetThreadInformation**](https://docs.microsoft.com/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadinformation) API with the *ThreadInformation* parameter set to **ThreadDynamicCodePolicy** in order to be allowed to execute dynamic code on this thread.</span></span>

<span data-ttu-id="36f31-144">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-144">**Audit only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-145">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-145">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="block-low-integrity-images"></a><span data-ttu-id="36f31-146">Blockieren von Bildern mit niedriger Integrität</span><span class="sxs-lookup"><span data-stu-id="36f31-146">Block low integrity images</span></span>

### <a name="description"></a><span data-ttu-id="36f31-147">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-147">Description</span></span>

<span data-ttu-id="36f31-148">Bilder mit niedriger Integrität blockieren verhindert, dass die Anwendung Dateien lädt, die nicht vertrauenswürdig sind, in der Regel, weil sie aus einem Sandkastenbrowser aus dem Internet heruntergeladen wurden.</span><span class="sxs-lookup"><span data-stu-id="36f31-148">Block low integrity images prevents the application from loading files that are untrusted, typically because they have been downloaded from the internet from a sandboxed browser.</span></span>

<span data-ttu-id="36f31-149">Diese Risikominderung blockiert Bildlasten, wenn das Bild über einen Zugriffssteuerungseintrag (Access Control Entry, ACE) verfügt, der Zugriff auf Low IL-Prozesse gewährt und kein Ace für die Vertrauensstellungsbezeichnung besitzt.</span><span class="sxs-lookup"><span data-stu-id="36f31-149">This mitigation will block image loads if the image has an Access Control Entry (ACE) which grants access to Low IL processes and which does not have a trust label ACE.</span></span> <span data-ttu-id="36f31-150">Es wird vom Speicher-Manager implementiert, der die Datei an das Zugeordnete an den Arbeitsspeicher sperrt.</span><span class="sxs-lookup"><span data-stu-id="36f31-150">It is implemented by the memory manager, which blocks the file from being mapped into memory.</span></span> <span data-ttu-id="36f31-151">Wenn eine Anwendung versucht, ein Image mit niedriger Integrität zu zuordnungen, löst sie einen Fehler STATUS_ACCESS_DENIED aus.</span><span class="sxs-lookup"><span data-stu-id="36f31-151">If an application attempts to map a low integrity image, it will trigger a STATUS_ACCESS_DENIED error.</span></span> <span data-ttu-id="36f31-152">Weitere Informationen zur Funktionsweise von Integritätsstufen finden Sie unter [Mandatory Integrity Control](https://docs.microsoft.com/windows/win32/secauthz/mandatory-integrity-control).</span><span class="sxs-lookup"><span data-stu-id="36f31-152">For details on how integrity levels work, see [Mandatory Integrity Control](https://docs.microsoft.com/windows/win32/secauthz/mandatory-integrity-control).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-153">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-153">Compatibility considerations</span></span>

<span data-ttu-id="36f31-154">Bilder mit niedriger Integrität blockieren verhindern, dass die Anwendung Dateien lädt, die aus dem Internet heruntergeladen wurden.</span><span class="sxs-lookup"><span data-stu-id="36f31-154">Block low integrity images will prevent the application from loading files that were downloaded from the internet.</span></span> <span data-ttu-id="36f31-155">Wenn ihr Anwendungsworkflow das Laden heruntergeladener Bilder erfordert, sollten Sie sicherstellen, dass sie aus einem Prozess mit höherer Vertrauenswürdigkeit heruntergeladen werden oder explizit umetikettiert werden, um diese Risikominderung anzuwenden.</span><span class="sxs-lookup"><span data-stu-id="36f31-155">If your application workflow requires loading images that are downloaded, you will want to ensure that they are downloaded from a higher-trust process, or are explicitly relabeled in order to apply this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-156">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-156">Configuration options</span></span>

<span data-ttu-id="36f31-157">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-157">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-158">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-158">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="block-remote-images"></a><span data-ttu-id="36f31-159">Blockieren von Remotebildern</span><span class="sxs-lookup"><span data-stu-id="36f31-159">Block remote images</span></span>

### <a name="description"></a><span data-ttu-id="36f31-160">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-160">Description</span></span>

<span data-ttu-id="36f31-161">Das Blockieren von Remoteabbildern verhindert, dass die Anwendung Dateien lädt, die auf einem Remotegerät gehostet werden, z. B. einer UNC-Freigabe.</span><span class="sxs-lookup"><span data-stu-id="36f31-161">Blocking remote images helps to prevent the application from loading files that are hosted on a remote device, such as a UNC share.</span></span> <span data-ttu-id="36f31-162">Das Blockieren von Remotebildern schützt vor dem Laden von Binärdateien in den Arbeitsspeicher, die sich auf einem externen Gerät befinden, das vom Angreifer gesteuert wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-162">Blocking remote images helps protect against loading binaries into memory that are on an external device controlled by the attacker.</span></span>

<span data-ttu-id="36f31-163">Durch diese Risikominderung werden Bildlasten blockiert, wenn das Bild auf einem Remotegerät gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="36f31-163">This mitigation will block image loads if the image is determined to be on a remote device.</span></span> <span data-ttu-id="36f31-164">Es wird vom Speicher-Manager implementiert, der die Datei an das Zugeordnete an den Arbeitsspeicher sperrt.</span><span class="sxs-lookup"><span data-stu-id="36f31-164">It is implemented by the memory manager, which blocks the file from being mapped into memory.</span></span> <span data-ttu-id="36f31-165">Wenn eine Anwendung versucht, eine Remotedatei zu zuordnungen, löst sie einen fehler STATUS_ACCESS_DENIED aus.</span><span class="sxs-lookup"><span data-stu-id="36f31-165">If an application attempts to map a remote file, it will trigger a STATUS_ACCESS_DENIED error.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-166">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-166">Compatibility considerations</span></span>

<span data-ttu-id="36f31-167">Remoteabbilder blockieren verhindert, dass die Anwendung Bilder von Remotegeräten lädt.</span><span class="sxs-lookup"><span data-stu-id="36f31-167">Block remote images will prevent the application from loading images from remote devices.</span></span> <span data-ttu-id="36f31-168">Wenn Ihre Anwendung Dateien oder Plug-Ins von Remotegeräten lädt, ist sie nicht mit dieser Gegenmaßnahmen kompatibel.</span><span class="sxs-lookup"><span data-stu-id="36f31-168">If your application loads files or plug-ins from remote devices, then it will not be compatible with this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-169">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-169">Configuration options</span></span>

<span data-ttu-id="36f31-170">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-170">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-171">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-171">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="block-untrusted-fonts"></a><span data-ttu-id="36f31-172">Blockieren nicht vertrauenswürdiger Schriftarten</span><span class="sxs-lookup"><span data-stu-id="36f31-172">Block untrusted fonts</span></span>

### <a name="description"></a><span data-ttu-id="36f31-173">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-173">Description</span></span>

<span data-ttu-id="36f31-174">Das Blockieren nicht vertrauenswürdiger Schriftarten verringert das Risiko eines Fehlers bei der Schriftartenparsierung, der dazu führt, dass der Angreifer Code auf dem Gerät ausführen kann.</span><span class="sxs-lookup"><span data-stu-id="36f31-174">Block untrusted fonts mitigates the risk of a flaw in font parsing leading to the attacker being able to run code on the device.</span></span> <span data-ttu-id="36f31-175">Nur Schriftarten, die im Verzeichnis windows\fonts installiert sind, werden zur Verarbeitung durch GDI geladen.</span><span class="sxs-lookup"><span data-stu-id="36f31-175">Only fonts that are installed into the windows\fonts directory will be loaded for processing by GDI.</span></span>

<span data-ttu-id="36f31-176">Diese Gegenmaßnahmen werden in GDI implementiert, wodurch der Speicherort der Datei überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-176">This mitigation is implemented within GDI, which validates the location of the file.</span></span> <span data-ttu-id="36f31-177">Wenn sich die Datei nicht im Verzeichnis der Systemschriftarten befindet, wird die Schriftart nicht zur Analyse geladen, und dieser Aufruf wird fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="36f31-177">If the file is not in the system fonts directory, the font will not be loaded for parsing and that call will fail.</span></span>

<span data-ttu-id="36f31-178">Diese Gegenmaßnahmen sind zusätzlich zu der integrierten Gegenmaßnahmen in Windows 10 1607 und höher, die die Schriftartenparsierung aus dem Kernel und in einen App-Container im Benutzermodus verschiebt.</span><span class="sxs-lookup"><span data-stu-id="36f31-178">This mitigation is in addition to the built-in mitigation provided in Windows 10 1607 and later, which moves font parsing out of the kernel and into a user-mode app container.</span></span> <span data-ttu-id="36f31-179">Jeder Exploit, der auf der Schriftartenparsierung basiert, geschieht in einem sandkastenbasierten und isolierten Kontext, wodurch das Risiko erheblich reduziert wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-179">Any exploit based on font parsing, as a result, happens in a sandboxed and isolated context, which reduces the risk significantly.</span></span> <span data-ttu-id="36f31-180">Weitere Informationen zu dieser Gegenmaßnahmen finden Sie im Blog Windows 10 mit [Zero-Day-Exploit-Gegenmaßnahmen](https://www.microsoft.com/security/blog/2017/01/13/hardening-windows-10-with-zero-day-exploit-mitigations/).</span><span class="sxs-lookup"><span data-stu-id="36f31-180">For details on this mitigation, see the blog [Hardening Windows 10 with zero-day exploit mitigations](https://www.microsoft.com/security/blog/2017/01/13/hardening-windows-10-with-zero-day-exploit-mitigations/).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-181">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-181">Compatibility considerations</span></span>

<span data-ttu-id="36f31-182">Die am häufigsten verwendeten Schriftarten außerhalb des Systemschriftartenverzeichnisses werden mit [Webschriftarten verwendet.](https://docs.microsoft.com/typography/fonts/font-faq#web)</span><span class="sxs-lookup"><span data-stu-id="36f31-182">The most common use of fonts outside of the system fonts directory is with [web fonts](https://docs.microsoft.com/typography/fonts/font-faq#web).</span></span> <span data-ttu-id="36f31-183">Moderne Browser, z. B. Microsoft Edge, verwenden DirectWrite anstelle von GDI und sind nicht betroffen.</span><span class="sxs-lookup"><span data-stu-id="36f31-183">Modern browsers, such as Microsoft Edge, use DirectWrite instead of GDI, and are not impacted.</span></span> <span data-ttu-id="36f31-184">Ältere Browser wie Internet Explorer 11 (und der IE-Modus im neuen Microsoft Edge) können jedoch betroffen sein, insbesondere bei Anwendungen wie Office 365, die Schriftartglyphen zum Anzeigen der Benutzeroberfläche verwenden.</span><span class="sxs-lookup"><span data-stu-id="36f31-184">However, legacy browsers, such as Internet Explorer 11 (and IE mode in the new Microsoft Edge) can be impacted, particularly with applications such as Office 365, which use font glyphs to display UI.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-185">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-185">Configuration options</span></span>

<span data-ttu-id="36f31-186">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-186">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-187">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-187">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="code-integrity-guard"></a><span data-ttu-id="36f31-188">Codeintegritätsschutz</span><span class="sxs-lookup"><span data-stu-id="36f31-188">Code integrity guard</span></span>

### <a name="description"></a><span data-ttu-id="36f31-189">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-189">Description</span></span>

<span data-ttu-id="36f31-190">Code Integrity Guard stellt sicher, dass alle in einen Prozess geladenen Binärdateien von Microsoft digital signiert werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-190">Code integrity guard ensures that all binaries loaded into a process are digitally signed by Microsoft.</span></span> <span data-ttu-id="36f31-191">Code Integrity Guard enthält [WHQL-Signaturen](https://docs.microsoft.com/windows-hardware/drivers/install/whql-release-signature) (Windows Hardware Quality Labs), die es WHQL-genehmigten Treibern ermöglichen, innerhalb des Prozesses ausgeführt zu werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-191">Code integrity guard includes [WHQL](https://docs.microsoft.com/windows-hardware/drivers/install/whql-release-signature) (Windows Hardware Quality Labs) signatures, which will allow WHQL-approved drivers to run within the process.</span></span>

<span data-ttu-id="36f31-192">Diese Gegenmaßnahmen werden im Speicher-Manager implementiert, wodurch verhindert wird, dass die Binärdatei dem Arbeitsspeicher zugeordnet wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-192">This mitigation is implemented within the memory manager, which blocks the binary from being mapped into memory.</span></span> <span data-ttu-id="36f31-193">Wenn Sie versuchen, eine Binärdatei zu laden, die nicht von Microsoft signiert ist, gibt die Speicher-Manger den Fehler STATUS_INVALID_IMAGE_HASH.</span><span class="sxs-lookup"><span data-stu-id="36f31-193">If you attempt to load a binary that is not signed by Microsoft, the memory manger will return the error STATUS_INVALID_IMAGE_HASH.</span></span> <span data-ttu-id="36f31-194">Durch das Blockieren auf Speicher-Manager-Ebene wird verhindert, dass sowohl vom Prozess geladene Binärdateien als auch Binärdateien in den Prozess eingejiziert werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-194">By blocking at the memory manager level, this prevents both binaries loaded by the process and binaries injected into the process.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-195">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-195">Compatibility considerations</span></span>

<span data-ttu-id="36f31-196">Diese Risikominderung blockiert insbesondere binäre Dateien, die nicht von Microsoft signiert sind.</span><span class="sxs-lookup"><span data-stu-id="36f31-196">This mitigation specifically blocks any binary that is not signed by Microsoft.</span></span> <span data-ttu-id="36f31-197">Daher ist sie mit den meisten Drittanbietersoftware nicht kompatibel, es sei denn, diese Software wird von der Microsoft Store verteilt (und digital signiert), und die Option zum Laden von Bildern, die vom Microsoft Store signiert wurden, ist ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="36f31-197">As such, it will be incompatible with most third-party software, unless that software is distributed by (and digitally signed by) the Microsoft Store, and the option to allow loading of images signed by the Microsoft Store is selected.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-198">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-198">Configuration options</span></span>

<span data-ttu-id="36f31-199">Auch das Laden von von **Microsoft Store** signierten Bildern zulassen – Anwendungen, die von der Microsoft Store verteilt werden, werden von der Microsoft Store digital signiert, und durch das Hinzufügen dieser Konfiguration können Binärdateien, die den Speicherzertifizierungsprozess durchgegangen sind, von der Anwendung geladen werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-199">**Also allow loading of images signed by Microsoft Store** - Applications that are distributed by the Microsoft Store will be digitally signed by the Microsoft Store, and adding this configuration will allow binaries that have gone through the store certification process to be loaded by the application.</span></span>

<span data-ttu-id="36f31-200">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-200">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-201">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-201">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="control-flow-guard-cfg"></a><span data-ttu-id="36f31-202">Control Flow Guard (CFG)</span><span class="sxs-lookup"><span data-stu-id="36f31-202">Control flow guard (CFG)</span></span>

### <a name="description"></a><span data-ttu-id="36f31-203">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-203">Description</span></span>

<span data-ttu-id="36f31-204">Control Flow Guard (CFG) verringert das Risiko, dass Angreifer Sicherheitslücken bei Speicherbeschädigungen nutzen, indem indirekte Funktionsaufrufe geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-204">Control flow guard (CFG) mitigates the risk of attackers using memory corruption vulnerabilities by protecting indirect function calls.</span></span> <span data-ttu-id="36f31-205">Ein Angreifer kann z. B. eine Pufferüberlauf-Sicherheitslücke nutzen, um Arbeitsspeicher mit einem Funktionszeiger zu überschreiben und diesen Funktionszeiger durch einen Zeiger auf ausführbaren Code seiner Wahl zu ersetzen (der möglicherweise auch in das Programm eingeblendet wurde).</span><span class="sxs-lookup"><span data-stu-id="36f31-205">For example, an attacker may user a buffer overflow vulnerability to overwrite memory containing a function pointer, and replace that function pointer with a pointer to executable code of their choice (which may also have been injected into the program).</span></span>

<span data-ttu-id="36f31-206">Diese Gegenmaßnahmen werden durch eine weitere Überprüfung zur Kompilierungszeit bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="36f31-206">This mitigation is provided by injecting another check at compile time.</span></span> <span data-ttu-id="36f31-207">Vor jedem indirekten Funktionsaufruf werden weitere Anweisungen hinzugefügt, die sicherstellen, dass es sich bei dem Ziel um ein gültiges Anrufziel handelt, bevor es aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-207">Before each indirect function call, another instructions are added which verify that the target is a valid call target before it is called.</span></span> <span data-ttu-id="36f31-208">Wenn das Ziel kein gültiges Anrufziel ist, wird die Anwendung beendet.</span><span class="sxs-lookup"><span data-stu-id="36f31-208">If the target is not a valid call target, then the application is terminated.</span></span> <span data-ttu-id="36f31-209">Daher können nur Anwendungen, die mit CFG-Unterstützung kompiliert werden, von dieser Gegenmaßnahmen profitieren.</span><span class="sxs-lookup"><span data-stu-id="36f31-209">As such, only applications that are compiled with CFG support can benefit from this mitigation.</span></span>

<span data-ttu-id="36f31-210">Die Überprüfung auf ein gültiges Ziel wird vom Windows bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="36f31-210">The check for a valid target is provided by the Windows kernel.</span></span> <span data-ttu-id="36f31-211">Wenn ausführbare Dateien geladen werden, werden die Metadaten für indirekte Anrufziele zur Ladezeit extrahiert und als gültige Aufrufziele markiert.</span><span class="sxs-lookup"><span data-stu-id="36f31-211">When executable files are loaded, the metadata for indirect call targets is extracted at load time and marked as valid call targets.</span></span> <span data-ttu-id="36f31-212">Wenn arbeitsspeicher zugewiesen und als ausführbare Datei markiert wird (z. B. für generierten Code), werden diese Speicherspeicherorte auch als gültige Aufrufziele gekennzeichnet, um Mechanismen wie die JIT-Kompilierung zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="36f31-212">Additionally, when memory is allocated and marked as executable (such as for generated code), these memory locations are also marked as valid call targets, to support mechanisms such as JIT compilation.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-213">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-213">Compatibility considerations</span></span>

<span data-ttu-id="36f31-214">Da Anwendungen zur Unterstützung von CFG kompiliert werden müssen, deklarieren sie implizit ihre Kompatibilität damit.</span><span class="sxs-lookup"><span data-stu-id="36f31-214">Since applications must be compiled to support CFG, they implicitly declare their compatibility with it.</span></span> <span data-ttu-id="36f31-215">Die meisten Anwendungen sollten daher mit dieser Gegenmaßnahmen aktiviert arbeiten.</span><span class="sxs-lookup"><span data-stu-id="36f31-215">Most applications, therefore, should work with this mitigation enabled.</span></span> <span data-ttu-id="36f31-216">Da diese Prüfungen in die Binärdatei kompiliert werden, besteht die Konfiguration, die Sie anwenden können, lediglich in der Deaktivierung von Prüfungen innerhalb des Windows Kernels.</span><span class="sxs-lookup"><span data-stu-id="36f31-216">Because these checks are compiled into the binary, the configuration you can apply is merely to disable checks within the Windows kernel.</span></span> <span data-ttu-id="36f31-217">Mit anderen Worten, die Gegenmaßnahmen sind standardmäßig aktiviert, Aber Sie können den Windows-Kernel so konfigurieren, dass er immer "Ja" zurück gibt, wenn Sie später feststellen, dass es ein Kompatibilitätsproblem gibt, das der Anwendungsentwickler in seinen Tests nicht festgestellt hat, was selten sein sollte.</span><span class="sxs-lookup"><span data-stu-id="36f31-217">In other words, the mitigation is on by default, but you can configure the Windows kernel to always return "yes" if you later determine that there is a compatibility issue that the application developer did not discover in their testing, which should be rare.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-218">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-218">Configuration options</span></span>

<span data-ttu-id="36f31-219">**Strikte CFG** verwenden : Im strengen Modus müssen alle in den Prozess geladenen Binärdateien für Control Flow Guard kompiliert werden (oder keinen ausführbaren Code enthalten , z. B. Ressourcen-DLLs), um geladen zu werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-219">**Use strict CFG** - In strict mode, all binaries loaded into the process must be compiled for Control Flow Guard (or have no executable code in them - such as resource dlls) in order to be loaded.</span></span>

> [!Note]
> <span data-ttu-id="36f31-220">**Der Steuerelementflussschutz** verfügt über keinen Überwachungsmodus.</span><span class="sxs-lookup"><span data-stu-id="36f31-220">**Control flow guard** has no audit mode.</span></span> <span data-ttu-id="36f31-221">Binärdateien werden kompiliert, wenn diese Gegenmaßnahmen aktiviert sind.</span><span class="sxs-lookup"><span data-stu-id="36f31-221">Binaries are compiled with this mitigation enabled.</span></span>

## <a name="data-execution-prevention-dep"></a><span data-ttu-id="36f31-222">Data Execution Prevention (DEP)</span><span class="sxs-lookup"><span data-stu-id="36f31-222">Data Execution Prevention (DEP)</span></span>

### <a name="description"></a><span data-ttu-id="36f31-223">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-223">Description</span></span>

<span data-ttu-id="36f31-224">Die Verhinderung von Datenausführung (Data Execution Prevention, DEP) verhindert, dass Speicher ausgeführt wird, der nicht explizit als ausführbare Datei zugewiesen wurde.</span><span class="sxs-lookup"><span data-stu-id="36f31-224">Data execution prevention (DEP) prevents memory that was not explicitly allocated as executable from being executed.</span></span> <span data-ttu-id="36f31-225">DEP schützt vor Angreifern, die bösartigen Code in den Prozess einwerfen, z. B. durch einen Pufferüberlauf, und führen diesen Code dann aus.</span><span class="sxs-lookup"><span data-stu-id="36f31-225">DEP helps protect against an attacker injecting malicious code into the process, such as through a buffer overflow, and then executing that code.</span></span>

<span data-ttu-id="36f31-226">Wenn Sie versuchen, den Anweisungszeiger auf eine Speicheradresse zu setzen, die nicht als ausführbare Datei gekennzeichnet ist, wird vom Prozessor eine Ausnahme ausgelöst (Allgemeine Schutzverletzung), wodurch die Anwendung abstürzt.</span><span class="sxs-lookup"><span data-stu-id="36f31-226">If you attempt to set the instruction pointer to a memory address not marked as executable, the processor will throw an exception (general-protection violation), causing the application to crash.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-227">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-227">Compatibility considerations</span></span>

<span data-ttu-id="36f31-228">Für alle ausführbaren x64-, ARM- und ARM-64-Ausführbaren Dateien ist standardmäßig die DEP aktiviert, und sie kann nicht deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-228">All x64, ARM, and ARM-64 executables have DEP enabled by default, and it cannot be disabled.</span></span> <span data-ttu-id="36f31-229">Da eine Anwendung nie ohne DEP ausgeführt wurde, wird die Kompatibilität vorausgesetzt.</span><span class="sxs-lookup"><span data-stu-id="36f31-229">Since an application will have never been executed without DEP, compatibility is assumed.</span></span>

<span data-ttu-id="36f31-230">Für alle x86-Binärdateien (32-Bit) ist DEP standardmäßig aktiviert, DEP kann jedoch pro Prozess deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-230">All x86 (32-bit) binaries have DEP enabled by default, but DEP can be disabled per process.</span></span> <span data-ttu-id="36f31-231">Einige ältere Anwendungen, in der Regel Anwendungen, die vor Windows XP SP2 entwickelt wurden, sind möglicherweise nicht mit DEP kompatibel.</span><span class="sxs-lookup"><span data-stu-id="36f31-231">Some old legacy applications, typically applications developed prior to Windows XP SP2, might not be compatible with DEP.</span></span> <span data-ttu-id="36f31-232">Solche Anwendungen generieren normalerweise dynamisch Code (z. B. JIT-Kompilierung) oder verknüpfen mit älteren Bibliotheken (z. B. älteren Versionen von ATL), die dynamisch Code generieren.</span><span class="sxs-lookup"><span data-stu-id="36f31-232">Such applications typically generate code dynamically (for example, JIT compiling) or link to older libraries (such as older versions of ATL) which dynamically generate code.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-233">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-233">Configuration options</span></span>

<span data-ttu-id="36f31-234">**Aktivieren der ATL-Thunk-Emulation** – Diese Konfigurationsoption deaktiviert die ATL-Thunk-Emulation.</span><span class="sxs-lookup"><span data-stu-id="36f31-234">**Enable ATL Thunk emulation** - This configuration option disables ATL Thunk emulation.</span></span> <span data-ttu-id="36f31-235">ATL, die ActiveX Vorlagenbibliothek, ist so klein und schnell wie möglich konzipiert.</span><span class="sxs-lookup"><span data-stu-id="36f31-235">ATL, the ActiveX Template Library, is designed to be as small and fast as possible.</span></span> <span data-ttu-id="36f31-236">Um die binäre Größe zu reduzieren, wird eine Technik namens *"Thunking" verwendet.*</span><span class="sxs-lookup"><span data-stu-id="36f31-236">In order to reduce binary size, it would use a technique called *thunking*.</span></span> <span data-ttu-id="36f31-237">Thunking wird in der Regel für die Interaktion zwischen 32-Bit- und 16-Bit-Anwendungen verwendet, aber es gibt hier keine 16-Bit-Komponenten für ATL.</span><span class="sxs-lookup"><span data-stu-id="36f31-237">Thunking is typically thought of for interacting between 32-bit and 16-bit applications, but there are no 16-bit components to ATL here.</span></span> <span data-ttu-id="36f31-238">Um die binäre Größe zu optimieren, speichern ATL stattdessen Computercode im Arbeitsspeicher, der nicht wortbündig ausgerichtet ist (wodurch eine kleinere Binärdatei erstellt wird), und ruft diesen Code dann direkt auf.</span><span class="sxs-lookup"><span data-stu-id="36f31-238">Rather, in order to optimize for binary size, ATL will store machine code in memory that is not word-aligned (creating a smaller binary), and then invoke that code directly.</span></span> <span data-ttu-id="36f31-239">ATL-Komponenten, die mit Visual Studio 7.1 oder früheren Versionen (Visual Studio 2003) kompiliert wurden, weisen diesen Speicher nicht als ausführbare Datei zu – die Thunkemulation löst dieses Kompatibilitätsproblem.</span><span class="sxs-lookup"><span data-stu-id="36f31-239">ATL components compiled with Visual Studio 7.1 or earlier (Visual Studio 2003) do not allocate this memory as executable - thunk emulation resolves that compatibility issue.</span></span> <span data-ttu-id="36f31-240">Anwendungen mit einem binären Erweiterungsmodell (z. B. Internet Explorer 11) müssen häufig die ATL-Thunk-Emulation aktiviert haben.</span><span class="sxs-lookup"><span data-stu-id="36f31-240">Applications that have a binary extension model (such as Internet Explorer 11) will often need to have ATL Thunk emulation enabled.</span></span>

## <a name="disable-extension-points"></a><span data-ttu-id="36f31-241">Deaktivieren von Erweiterungspunkten</span><span class="sxs-lookup"><span data-stu-id="36f31-241">Disable extension points</span></span>

### <a name="description"></a><span data-ttu-id="36f31-242">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-242">Description</span></span>

<span data-ttu-id="36f31-243">Durch diese Risikominderung werden verschiedene Erweiterungspunkte für eine Anwendung deaktiviert, die zum Einrichten von Persistenz oder zum Erhöhen von Berechtigungen für schädliche Inhalte verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="36f31-243">This mitigation disables various extension points for an application, which might be used to establish persistence or elevate privileges of malicious content.</span></span>

<span data-ttu-id="36f31-244">Dies umfasst Folgendes:</span><span class="sxs-lookup"><span data-stu-id="36f31-244">This includes:</span></span>

- <span data-ttu-id="36f31-245">**AppInit DLLs** – Wenn ein Prozess gestartet wird, wird die angegebene DLL vom System in den Kontext des neu gestarteten Prozesses geladen, bevor die Einstiegspunktfunktion aufruft.</span><span class="sxs-lookup"><span data-stu-id="36f31-245">**AppInit DLLs** - Whenever a process starts, the system will load the specified DLL into to context of the newly started process before calling its entry point function.</span></span> <span data-ttu-id="36f31-246">[Details zu AppInit-DLLs finden Sie hier](https://docs.microsoft.com/windows/win32/winmsg/about-window-classes#application-global-classes).</span><span class="sxs-lookup"><span data-stu-id="36f31-246">[Details on AppInit DLLs can be found here](https://docs.microsoft.com/windows/win32/winmsg/about-window-classes#application-global-classes).</span></span> <span data-ttu-id="36f31-247">Wenn diese Gegenmaßnahmen angewendet werden, werden AppInit-DLLs nicht geladen.</span><span class="sxs-lookup"><span data-stu-id="36f31-247">With this mitigation applied, AppInit DLLs are not loaded.</span></span> <span data-ttu-id="36f31-248">Ab Windows 7 müssen AppInit-DLLs digital signiert werden, wie [hier beschrieben.](https://docs.microsoft.com/windows/win32/win7appqual/appinit-dlls-in-windows-7-and-windows-server-2008-r2)</span><span class="sxs-lookup"><span data-stu-id="36f31-248">Beginning with Windows 7, AppInit DLLs need to be digitally signed, [as described here](https://docs.microsoft.com/windows/win32/win7appqual/appinit-dlls-in-windows-7-and-windows-server-2008-r2).</span></span> <span data-ttu-id="36f31-249">Darüber hinaus werden Windows 8 AppInit-DLLs nicht geladen, wenn SecureBoot aktiviert ist, wie [hier beschrieben.](https://docs.microsoft.com/windows/win32/dlls/secure-boot-and-appinit-dlls)</span><span class="sxs-lookup"><span data-stu-id="36f31-249">Additionally, beginning with Windows 8, AppInit DLLs will not be loaded if SecureBoot is enabled, [as described here](https://docs.microsoft.com/windows/win32/dlls/secure-boot-and-appinit-dlls).</span></span>
- <span data-ttu-id="36f31-250">**Legacy-IMEs** – Mit einem Eingabemethode-Editor (Input Method Editor, IME) kann ein Benutzer Text in einer Sprache eingeben, die mehr Zeichen als auf einer Tastatur dargestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="36f31-250">**Legacy IMEs** - An Input Method Editor (IME) allows a user to type text in a language that has more characters than can be represented on a keyboard.</span></span> <span data-ttu-id="36f31-251">Drittanbieter können IMEs erstellen.</span><span class="sxs-lookup"><span data-stu-id="36f31-251">Third parties are able to create IMEs.</span></span> <span data-ttu-id="36f31-252">Ein bösartiger IME kann Anmeldeinformationen oder andere vertrauliche Informationen aus dieser Eingabeaufnahme abrufen.</span><span class="sxs-lookup"><span data-stu-id="36f31-252">A malicious IME might obtain credentials or other sensitive information from this input capture.</span></span> <span data-ttu-id="36f31-253">Einige IMEs, die als Legacy-IMEs bezeichnet werden, funktionieren nur für Windows Desktop-Apps und nicht für UWP-Apps.</span><span class="sxs-lookup"><span data-stu-id="36f31-253">Some IMEs, referred to as Legacy IMEs, will only work on Windows Desktop apps, and not UWP apps.</span></span> <span data-ttu-id="36f31-254">Durch diese Risikominderung wird außerdem verhindert, dass dieser legacy-IME in die angegebene Windows Desktop-App geladen wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-254">This mitigation will also prevent this legacy IME from loading into the specified Windows Desktop app.</span></span>
- <span data-ttu-id="36f31-255">**Windows Ereignishaken** : Eine Anwendung kann die [SetWinEventHook-API aufrufen,](https://docs.microsoft.com/windows/win32/api/winuser/nf-winuser-setwineventhook) um interesse an einem Ereignis zu registrieren, das stattfindet.</span><span class="sxs-lookup"><span data-stu-id="36f31-255">**Windows Event Hooks** - An application can call the [SetWinEventHook API](https://docs.microsoft.com/windows/win32/api/winuser/nf-winuser-setwineventhook) to register interest in an event taking place.</span></span> <span data-ttu-id="36f31-256">Eine DLL wird angegeben und kann in den Prozess injiziert werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-256">A DLL is specified and can be injected into the process.</span></span> <span data-ttu-id="36f31-257">Diese Gegenmaßnahmen erzwingt, dass der Hook in den Registrierungsprozess bereitgestellt wird, anstatt prozessin-prozess über eine injizierte DLL ausgeführt zu werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-257">This mitigation forces the hook to be posted to the registering process rather than running in-process through an injected DLL.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-258">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-258">Compatibility considerations</span></span>

<span data-ttu-id="36f31-259">Die meisten dieser Erweiterungspunkte werden relativ selten verwendet, sodass die Kompatibilitätsauswirkungen in der Regel gering sind, insbesondere auf einer einzelnen Anwendungsebene.</span><span class="sxs-lookup"><span data-stu-id="36f31-259">Most of these extension points are relatively infrequently used, so compatibility impact is typically small, particularly at an individual application level.</span></span> <span data-ttu-id="36f31-260">Eine Überlegung ist, ob Benutzer Legacy-IMEs von Drittanbietern verwenden, die nicht mit der geschützten Anwendung funktionieren.</span><span class="sxs-lookup"><span data-stu-id="36f31-260">The one consideration is if users are using third-party Legacy IMEs that will not work with the protected application.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-261">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-261">Configuration options</span></span>

<span data-ttu-id="36f31-262">Es gibt keine Konfigurationsoptionen für diese Gegenmaßnahmen.</span><span class="sxs-lookup"><span data-stu-id="36f31-262">There are no configuration options for this mitigation.</span></span>

> [!Note]
> <span data-ttu-id="36f31-263">**Erweiterungspunkte deaktivieren** weist keinen Überwachungsmodus auf.</span><span class="sxs-lookup"><span data-stu-id="36f31-263">**Disable extension points** has no audit mode.</span></span>

## <a name="disable-win32k-system-calls"></a><span data-ttu-id="36f31-264">Deaktivieren von Win32k-Systemanrufen</span><span class="sxs-lookup"><span data-stu-id="36f31-264">Disable Win32k system calls</span></span>

### <a name="description"></a><span data-ttu-id="36f31-265">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-265">Description</span></span>

<span data-ttu-id="36f31-266">Win32k.sys bietet eine breite Angriffsfläche für einen Angreifer.</span><span class="sxs-lookup"><span data-stu-id="36f31-266">Win32k.sys provides a broad attack surface for an attacker.</span></span> <span data-ttu-id="36f31-267">Als Kernelmoduskomponente wird sie häufig als Escapevektor für Sandkastenanwendungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="36f31-267">As a kernel-mode component, it is frequently targeted as an escape vector for applications that are sandboxed.</span></span> <span data-ttu-id="36f31-268">Diese Risikominderung verhindert Aufrufe win32k.sys, indem verhindert wird, dass sich ein Thread in einen GUI-Thread wandelt, der dann Zugriff auf Win32k-Funktionen hat.</span><span class="sxs-lookup"><span data-stu-id="36f31-268">This mitigation prevents calls into win32k.sys by blocking a thread from converting itself into a GUI thread, which is then given access to invoke Win32k functions.</span></span> <span data-ttu-id="36f31-269">Ein Thread ist beim Erstellen nicht GUI, wird jedoch beim ersten Aufruf von win32k.sys oder über einen API-Aufruf von [IsGuiThread konvertiert.](https://docs.microsoft.com/windows/win32/api/winuser/nf-winuser-isguithread)</span><span class="sxs-lookup"><span data-stu-id="36f31-269">A thread is non-GUI when created, but converted on first call to win32k.sys, or through an API call to [IsGuiThread](https://docs.microsoft.com/windows/win32/api/winuser/nf-winuser-isguithread).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-270">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-270">Compatibility considerations</span></span>

<span data-ttu-id="36f31-271">Diese Gegenmaßnahmen sind für Prozesse konzipiert, bei der es sich um dedizierte Nicht-UI-Prozesse handelt.</span><span class="sxs-lookup"><span data-stu-id="36f31-271">This mitigation is designed for processes that are dedicated non-UI processes.</span></span> <span data-ttu-id="36f31-272">Viele moderne Browser verwenden z. B. die Prozessisolation und integrieren Nicht-UI-Prozesse.</span><span class="sxs-lookup"><span data-stu-id="36f31-272">For example, many modern browsers will use process isolation and incorporate non-UI processes.</span></span> <span data-ttu-id="36f31-273">Jede Anwendung, die eine GUI mit einem einzelnen Prozess anzeigt, wird von dieser Gegenmaßnahmen betroffen sein.</span><span class="sxs-lookup"><span data-stu-id="36f31-273">Any application that displays a GUI using a single process will be impacted by this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-274">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-274">Configuration options</span></span>

<span data-ttu-id="36f31-275">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-275">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-276">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-276">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="do-not-allow-child-processes"></a><span data-ttu-id="36f31-277">Untergeordnete Prozesse nicht zulassen</span><span class="sxs-lookup"><span data-stu-id="36f31-277">Do not allow child processes</span></span>

### <a name="description"></a><span data-ttu-id="36f31-278">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-278">Description</span></span>

<span data-ttu-id="36f31-279">Diese Gegenmaßnahmen verhindern, dass eine Anwendung neue untergeordnete Anwendungen erstellt.</span><span class="sxs-lookup"><span data-stu-id="36f31-279">This mitigation prevents an application from creating new child applications.</span></span> <span data-ttu-id="36f31-280">Ein gängiges Verfahren, das von Gegnern verwendet wird, ist das Initiieren eines vertrauenswürdigen Prozesses auf dem Gerät mit böswilliger Eingabe (ein Angriff vom Land), der häufig das Starten einer anderen Anwendung auf dem Gerät erfordert.</span><span class="sxs-lookup"><span data-stu-id="36f31-280">A common technique used by adversaries is to initiate a trusted process on the device with malicious input (a "living off the land" attack), which often requires launching another application on the device.</span></span> <span data-ttu-id="36f31-281">Wenn es keine legitimen Gründe gibt, warum eine Anwendung einen untergeordneten Prozess starten würde, wird dieser potenzielle Angriffsvektor durch diese Gegenmaßnahmen abgemildert.</span><span class="sxs-lookup"><span data-stu-id="36f31-281">If there are no legitimate reasons why an application would launch a child process, this mitigation mitigates that potential attack vector.</span></span> <span data-ttu-id="36f31-282">Die Gegenmaßnahmen werden durch Festlegen einer Eigenschaft für das Prozesstoken angewendet, das die Erstellung eines Tokens für den untergeordneten Prozess mit der Fehlermeldung STATUS_CHILD_PROCESS_BLOCKED.</span><span class="sxs-lookup"><span data-stu-id="36f31-282">The mitigation is applied by setting a property on the process token, which blocks creating a token for the child process with the error message STATUS_CHILD_PROCESS_BLOCKED.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-283">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-283">Compatibility considerations</span></span>

<span data-ttu-id="36f31-284">Wenn Ihre Anwendung aus irgendeinem Grund untergeordnete Anwendungen startet, z. B. die Unterstützung von Hyperlinks, die einen Browser oder einen externen Browser starten, oder die andere Dienstprogramme auf dem Computer starten, wird diese Funktionalität durch diese Gegenmaßnahmen unterbrochen.</span><span class="sxs-lookup"><span data-stu-id="36f31-284">If your application launches child applications for any reason, such as supporting hyperlinks that launch a browser or an external browser, or which launch other utilities on the computer, this functionality will be broken with this mitigation applied.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-285">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-285">Configuration options</span></span>

<span data-ttu-id="36f31-286">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-286">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-287">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-287">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="export-address-filtering"></a><span data-ttu-id="36f31-288">Filtern von Exportadressen</span><span class="sxs-lookup"><span data-stu-id="36f31-288">Export address filtering</span></span>

### <a name="description"></a><span data-ttu-id="36f31-289">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-289">Description</span></span>

<span data-ttu-id="36f31-290">Die Exportadressenfilterung (EAF) verringert das Risiko, dass schädlicher Code in der Exportadressentabelle aller geladenen Module nach Modulen sucht, die nützliche APIs für den Angriff enthalten.</span><span class="sxs-lookup"><span data-stu-id="36f31-290">Export address filtering (EAF) mitigates the risk of malicious code looking at the export address table of all loaded modules to find modules that contain useful APIs for their attack.</span></span> <span data-ttu-id="36f31-291">Dies ist eine gängige Taktik, die von shellcode verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-291">This is a common tactic used by shellcode.</span></span> <span data-ttu-id="36f31-292">Um das Risiko eines solchen Angriffs zu mindern, schützt diese Risikominderung drei häufig angegriffene Module:</span><span class="sxs-lookup"><span data-stu-id="36f31-292">In order to mitigate the risk of such an attack, this mitigation protects three commonly attacked modules:</span></span>

- <span data-ttu-id="36f31-293">ntdll.dll</span><span class="sxs-lookup"><span data-stu-id="36f31-293">ntdll.dll</span></span>
- <span data-ttu-id="36f31-294">kernelbase.dll</span><span class="sxs-lookup"><span data-stu-id="36f31-294">kernelbase.dll</span></span>
- <span data-ttu-id="36f31-295">kernel32.dll</span><span class="sxs-lookup"><span data-stu-id="36f31-295">kernel32.dll</span></span>

<span data-ttu-id="36f31-296">Der Ausgleich schützt die Speicherseite im [Exportverzeichnis, das auf die [Exportadressentabelle verweist.](https://docs.microsoft.com/windows/win32/debug/pe-format#export-address-table)</span><span class="sxs-lookup"><span data-stu-id="36f31-296">The mitigation protects the memory page in the [export directory that points to the [export address table](https://docs.microsoft.com/windows/win32/debug/pe-format#export-address-table).</span></span> <span data-ttu-id="36f31-297">Auf diese Speicherseite wird [der PAGE_GUARD](https://docs.microsoft.com/windows/win32/memory/creating-guard-pages) angewendet.</span><span class="sxs-lookup"><span data-stu-id="36f31-297">This memory page will have the [PAGE_GUARD](https://docs.microsoft.com/windows/win32/memory/creating-guard-pages) protection applied to it.</span></span> <span data-ttu-id="36f31-298">Wenn jemand versucht, auf diesen Speicher zu zugreifen, generiert er eine STATUS_GUARD_PAGE_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="36f31-298">When someone tries to access this memory, it will generate a STATUS_GUARD_PAGE_VIOLATION.</span></span> <span data-ttu-id="36f31-299">Die Gegenmaßnahmen verarbeiten diese Ausnahme, und wenn die Zugriffsanweisung die Überprüfung nicht besteht, wird der Prozess beendet.</span><span class="sxs-lookup"><span data-stu-id="36f31-299">The mitigation handles this exception, and if the accessing instruction doesn't pass validation, the process will be terminated.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-300">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-300">Compatibility considerations</span></span>

<span data-ttu-id="36f31-301">Diese Risikominderung ist in erster Linie ein Problem für Anwendungen wie Debugger, Sandkastenanwendungen, Anwendungen mit DRM oder Anwendungen, die Antidebuggertechnologie implementieren.</span><span class="sxs-lookup"><span data-stu-id="36f31-301">This mitigation is primarily an issue for applications such as debuggers, sandboxed applications, applications using DRM, or applications that implement anti-debugging technology.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-302">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-302">Configuration options</span></span>

<span data-ttu-id="36f31-303">**Überprüfen des Zugriffs** auf Module, die häufig von Exploits missbraucht werden – Diese Option, auch als EAF+ bekannt, bietet Schutz für andere häufig angegriffene Module:</span><span class="sxs-lookup"><span data-stu-id="36f31-303">**Validate access for modules that are commonly abused by exploits** - This option, also known as EAF+, adds protections for other commonly attacked modules:</span></span>

- `mshtml.dll`
- `flash*.ocx`
- `jscript*.ocx`
- `vbscript.dll`
- `vgx.dll`
- `mozjs.dll`
- `xul.dll`
- `acrord32.dll`
- `acrofx32.dll`
- `acroform.api`

<span data-ttu-id="36f31-304">Durch aktivieren von EAF+ fügt diese Gegenmaßnahmen außerdem den PAGE_GUARD-Schutz zu der Seite hinzu, die den "MZ"-Header enthält, die ersten beiden Bytes des [DOS-Headers in](https://docs.microsoft.com/windows/win32/debug/pe-format#ms-dos-stub-image-only)einer PE-Datei. Dies ist ein weiterer Aspekt bekannter Speicherinhalte, nach denen shellcode suchen kann, um Module zu identifizieren, die potenziell für den Arbeitsspeicher von Interesse sind.</span><span class="sxs-lookup"><span data-stu-id="36f31-304">Additionally, by enabling EAF+, this mitigation adds the PAGE_GUARD protection to the page containing the "MZ" header, the first two bytes of the [DOS header in a PE file](https://docs.microsoft.com/windows/win32/debug/pe-format#ms-dos-stub-image-only), which is another aspect of known memory content which shellcode can look for to identify modules potentially of interest in memory.</span></span>

<span data-ttu-id="36f31-305">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-305">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-306">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-306">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="force-randomization-for-images-mandatory-aslr"></a><span data-ttu-id="36f31-307">Erzwingen der Randomisierung für Bilder (obligatorische ASLR)</span><span class="sxs-lookup"><span data-stu-id="36f31-307">Force randomization for images (Mandatory ASLR)</span></span>

### <a name="description"></a><span data-ttu-id="36f31-308">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-308">Description</span></span>

<span data-ttu-id="36f31-309">Die Randomisierung des Adressraumlayouts (Address Space Layout Randomization, ASLR) verringert das Risiko, dass ein Angreifer sein Wissen über das Speicherlayout des Systems verwendet, um Code auszuführen, der bereits im Prozessspeicher vorhanden ist und bereits als ausführbare Datei gekennzeichnet ist.</span><span class="sxs-lookup"><span data-stu-id="36f31-309">Address Space Layout Randomization (ASLR) mitigates the risk of an attacker using their knowledge of the memory layout of the system in order to execute code that is already present in process memory and already marked as executable.</span></span> <span data-ttu-id="36f31-310">Dies kann das Risiko eines Angreifers mithilfe von Techniken wie return-to-libc-Angriffen verringern, bei denen der Angreifer den Kontext legt und dann die Rückgabeadresse so ändert, dass vorhandener Code mit Kontext ausgeführt wird, der dem Zweck des Angreifers entspricht.</span><span class="sxs-lookup"><span data-stu-id="36f31-310">This can mitigate the risk of an attacker using techniques such as return-to-libc attacks, where the adversary sets the context and then modifies the return address to execute existing code with context that suits the adversary's purpose.</span></span>

<span data-ttu-id="36f31-311">Die obligatorische ASLR erzwingt eine Erneute Basis aller DLLs innerhalb des Prozesses.</span><span class="sxs-lookup"><span data-stu-id="36f31-311">Mandatory ASLR forces a rebase of all DLLs within the process.</span></span> <span data-ttu-id="36f31-312">Ein Entwickler kann ASLR mithilfe der [Linkeroption /DYNAMICBASE](https://docs.microsoft.com/cpp/build/reference/dynamicbase-use-address-space-layout-randomization?view=vs-2019&preserve-view=true) aktivieren, und diese Risikominderung hat die gleiche Auswirkung.</span><span class="sxs-lookup"><span data-stu-id="36f31-312">A developer can enable ASLR using the [/DYNAMICBASE](https://docs.microsoft.com/cpp/build/reference/dynamicbase-use-address-space-layout-randomization?view=vs-2019&preserve-view=true) linker option, and this mitigation has the same effect.</span></span>

<span data-ttu-id="36f31-313">Wenn der Speicher-Manager im Bild in den Prozess zuordnen wird, wird die obligatorische ASLR DLLs und EXEs, die sich nicht für ASLR entschieden haben, forciert.</span><span class="sxs-lookup"><span data-stu-id="36f31-313">When the memory manager is mapping in the image into the process, Mandatory ASLR will forcibly rebase DLLs and EXEs that have not opted in to ASLR.</span></span> <span data-ttu-id="36f31-314">Beachten Sie jedoch, dass diese Neubasierung keine Entropie besitzt und daher an einem vorhersagbaren Speicherort im Arbeitsspeicher platziert werden kann.</span><span class="sxs-lookup"><span data-stu-id="36f31-314">Note, however, that this rebasing has no entropy, and can therefore be placed at a predictable location in memory.</span></span> <span data-ttu-id="36f31-315">Für rebased und randomized location of binaries, this mitigation should be paired with [Randomize memory allocations (Bottom-up ASLR)](#randomize-memory-allocations-bottom-up-aslr).</span><span class="sxs-lookup"><span data-stu-id="36f31-315">For rebased and randomized location of binaries, this mitigation should be paired with [Randomize memory allocations (Bottom-up ASLR)](#randomize-memory-allocations-bottom-up-aslr).</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-316">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-316">Compatibility considerations</span></span>

<span data-ttu-id="36f31-317">Diese Kompatibilitätswirkung von ASLR ist in der Regel auf ältere Anwendungen beschränkt, die mithilfe von Compilern erstellt wurden, die Annahmen zur Basisadresse einer Binärdatei erstellt haben oder Basisverlagerungsinformationen entfernt haben.</span><span class="sxs-lookup"><span data-stu-id="36f31-317">This compatibility impact of ASLR is typically constrained to older applications that were built using compilers that made assumptions about the base address of a binary file or have stripped out base relocation information.</span></span> <span data-ttu-id="36f31-318">Dies kann zu unvorhersehbaren Fehlern führen, wenn der Ausführungsfluss versucht, zum erwarteten und nicht zum tatsächlichen Speicherort im Arbeitsspeicher zu springen.</span><span class="sxs-lookup"><span data-stu-id="36f31-318">This can lead to unpredictable errors as the execution flow attempts to jump to the expected, rather than the actual, location in memory.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-319">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-319">Configuration options</span></span>

<span data-ttu-id="36f31-320">**Entfernte Bilder nicht** zulassen – Mit dieser Option wird das Laden von Bildern blockiert, deren Standortinformationen entfernt wurden.</span><span class="sxs-lookup"><span data-stu-id="36f31-320">**Do not allow stripped images** - This option blocks the loading of images that have had relocation information stripped.</span></span> <span data-ttu-id="36f31-321">Das Windows#A0 enthält absolute Adressen, und der Compiler generiert auch eine [Basisverlagerungstabelle, mit der das Lademodul alle relativen Speicherverweise und deren Offset finden kann, sodass sie aktualisiert werden können, wenn die Binärdatei nicht an ihrer bevorzugten Basisadresse geladen wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-321">The Windows PE file format contains absolute addresses, and the compiler also generates a [base relocation table that the loader can use to find all relative memory references and their offset, so they can be updated if the binary does not load at its preferred base address.</span></span> <span data-ttu-id="36f31-322">Einige ältere Anwendungen isolieren diese Informationen in Produktionsbuilds, und daher können diese Binärdateien nicht neubasiert werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-322">Some older applications strip out this information in production builds, and therefore these binaries cannot be rebased.</span></span> <span data-ttu-id="36f31-323">Durch diese Gegenmaßnahmen wird verhindert, dass solche Binärdateien geladen werden (anstatt sie an ihrer bevorzugten Basisadresse zu laden).</span><span class="sxs-lookup"><span data-stu-id="36f31-323">This mitigation blocks such binaries from being loaded (instead of allowing them to load at their preferred base address).</span></span>

> [!Note]
> <span data-ttu-id="36f31-324">**Die Erzwingen der Randomisierung für Bilder (obligatorische ASLR)** verfügt über keinen Überwachungsmodus.</span><span class="sxs-lookup"><span data-stu-id="36f31-324">**Force randomization for images (Mandatory ASLR)** has no audit mode.</span></span>

## <a name="import-address-filtering-iaf"></a><span data-ttu-id="36f31-325">Import address filtering (IAF)</span><span class="sxs-lookup"><span data-stu-id="36f31-325">Import address filtering (IAF)</span></span>

### <a name="description"></a><span data-ttu-id="36f31-326">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-326">Description</span></span>

<span data-ttu-id="36f31-327">Die Minderung der Importadressenfilterung (Import Address Filtering, IAF) trägt dazu bei, das Risiko zu mindern, dass ein Angreifer den Steuerungsfluss einer Anwendung ändert, indem die Importadressentabelle (Import Address Table, IAT) geändert wird, um zu beliebigem Code der Wahl des Angreifers umzuleiten, wenn diese Funktion aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-327">The import address filtering (IAF) mitigation helps mitigate the risk of an adversary changing the control flow of an application by modifying the import address table (IAT) to redirect to arbitrary code of the attacker's choice when that function is called.</span></span> <span data-ttu-id="36f31-328">Ein Angreifer kann diesen Ansatz verwenden, um die Steuerung zu entführen oder Anrufe an vertrauliche APIs abzufangen, zu überprüfen und potenziell zu blockieren.</span><span class="sxs-lookup"><span data-stu-id="36f31-328">An attacker could use this approach to hijack control, or to intercept, inspect, and potentially block calls to sensitive APIs.</span></span>

<span data-ttu-id="36f31-329">Auf die Speicherseiten für alle geschützten APIs wird der PAGE_GUARD [angewendet.](https://docs.microsoft.com/windows/win32/memory/creating-guard-pages)</span><span class="sxs-lookup"><span data-stu-id="36f31-329">The memory pages for all protected APIs will have the [PAGE_GUARD](https://docs.microsoft.com/windows/win32/memory/creating-guard-pages) protection applied to them.</span></span> <span data-ttu-id="36f31-330">Wenn jemand versucht, auf diesen Speicher zu zugreifen, generiert er eine STATUS_GUARD_PAGE_VIOLATION.</span><span class="sxs-lookup"><span data-stu-id="36f31-330">When someone tries to access this memory, it will generate a STATUS_GUARD_PAGE_VIOLATION.</span></span> <span data-ttu-id="36f31-331">Die Gegenmaßnahmen verarbeiten diese Ausnahme, und wenn die Zugriffsanweisung die Überprüfung nicht besteht, wird der Prozess beendet.</span><span class="sxs-lookup"><span data-stu-id="36f31-331">The mitigation handles this exception, and if the accessing instruction doesn't pass validation, the process will be terminated.</span></span>

<span data-ttu-id="36f31-332">Diese Gegenmaßnahmen schützen die folgenden Windows APIs:</span><span class="sxs-lookup"><span data-stu-id="36f31-332">This mitigation protects the following Windows APIs:</span></span>

- `GetProcAddress`
- `GetProcAddressForCaller`
- `LoadLibraryA`
- `LoadLibraryExA`
- `LoadLibraryW`
- `LoadLibraryExW`
- `LdrGetProcedureAddress`
- `LdrGetProcedureAddressEx`
- `LdrGetProcedureAddressForCaller`
- `LdrLoadDll`
- `VirtualProtect`
- `VirtualProtectEx`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `NtProtectVirtualMemory`
- `CreateProcessA`
- `CreateProcessW`
- `WinExec`
- `CreateProcessAsUserA`
- `CreateProcessAsUserW`
- `GetModuleHandleA`
- `GetModuleHandleW`
- `RtlDecodePointer`
- `DecodePointer`

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-333">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-333">Compatibility considerations</span></span>

<span data-ttu-id="36f31-334">Legitime Anwendungen, die API-Abfang durchführen, können durch diese Gegenmaßnahmen erkannt werden und dazu führen, dass einige Anwendungen abstürzen.</span><span class="sxs-lookup"><span data-stu-id="36f31-334">Legitimate applications that perform API interception may be detected by this mitigation and cause some applications to crash.</span></span> <span data-ttu-id="36f31-335">Beispiele hierfür sind Sicherheitssoftware und Anwendungskompatibilitäts-Shims.</span><span class="sxs-lookup"><span data-stu-id="36f31-335">Examples include security software and application compatibility shims.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-336">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-336">Configuration options</span></span>

<span data-ttu-id="36f31-337">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-337">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-338">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-338">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="randomize-memory-allocations-bottom-up-aslr"></a><span data-ttu-id="36f31-339">Randomize memory allocations (Bottom-up ASLR)</span><span class="sxs-lookup"><span data-stu-id="36f31-339">Randomize memory allocations (Bottom-up ASLR)</span></span>

### <a name="description"></a><span data-ttu-id="36f31-340">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-340">Description</span></span>

<span data-ttu-id="36f31-341">Randomize memory allocations (Bottom-up ASLR) fügt Verschiebungen Entropie hinzu, sodass ihr Standort randomisiert ist und daher weniger vorhersehbar ist.</span><span class="sxs-lookup"><span data-stu-id="36f31-341">Randomize memory allocations (Bottom-up ASLR) adds entropy to relocations, so their location is randomized and therefore less predictable.</span></span> <span data-ttu-id="36f31-342">Für diese Gegenmaßnahmen muss die obligatorische ASLR wirksam werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-342">This mitigation requires Mandatory ASLR to take effect.</span></span>

<span data-ttu-id="36f31-343">Die Größe des 32-Bit-Adressraums stellt praktische Einschränkungen für die Entropie, die hinzugefügt werden kann, und daher erschweren 64-Bit-Anwendungen es einem Angreifer, einen Speicherort im Arbeitsspeicher zu erraten.</span><span class="sxs-lookup"><span data-stu-id="36f31-343">The size of the 32-bit address space places practical constraints on the entropy that can be added, and therefore 64-bit applications make it more difficult for an attacker to guess a location in memory.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-344">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-344">Compatibility considerations</span></span>

<span data-ttu-id="36f31-345">Die meisten Anwendungen, die mit der obligatorischen ASLR (Rebasing) kompatibel sind, sind auch mit der anderen Entropie von Bottom-up ASLR kompatibel.</span><span class="sxs-lookup"><span data-stu-id="36f31-345">Most applications that are compatible with Mandatory ASLR (rebasing) are also compatible with the other entropy of Bottom-up ASLR.</span></span> <span data-ttu-id="36f31-346">Einige Anwendungen haben möglicherweise Probleme beim Abschneiden von Zeigern, wenn sie lokale Zeiger in 32-Bit-Variablen speichern (eine Basisadresse unter 4 GB erwartet), und daher mit der Option für hohe Entropie (die deaktiviert werden kann) nicht kompatibel ist.</span><span class="sxs-lookup"><span data-stu-id="36f31-346">Some applications may have pointer-truncation issues if they are saving local pointers in 32-bit variables (expecting a base address below 4 GB), and thus will be incompatible with the high entropy option (which can be disabled).</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-347">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-347">Configuration options</span></span>

<span data-ttu-id="36f31-348">Verwenden Sie keine hohe **Entropie** – mit dieser Option wird die Verwendung von ASLR mit hoher Entropie deaktiviert, wodurch der Bottom-up-Zuordnung für 64-Bit-Anwendungen 24 Bit Entropie (1 TB Varianz) hinzufügt werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-348">**Don't use high entropy** - this option disables the use of high-entropy ASLR, which adds 24 bits of entropy (1 TB of variance) into the bottom-up allocation for 64-bit applications.</span></span>

> [!Note]
> <span data-ttu-id="36f31-349">**Randomize memory allocations (Bottom-up ASLR)** has no audit mode.</span><span class="sxs-lookup"><span data-stu-id="36f31-349">**Randomize memory allocations (Bottom-up ASLR)** has no audit mode.</span></span>

## <a name="simulate-execution-simexec"></a><span data-ttu-id="36f31-350">Simulieren der Ausführung (SimExec)</span><span class="sxs-lookup"><span data-stu-id="36f31-350">Simulate execution (SimExec)</span></span>

### <a name="description"></a><span data-ttu-id="36f31-351">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-351">Description</span></span>

<span data-ttu-id="36f31-352">Die Simulationsausführung (SimExec) ist nur für 32-Bit-Anwendungen eine Gegenmaßnahmen.</span><span class="sxs-lookup"><span data-stu-id="36f31-352">Simulate execution (SimExec) is a mitigation for 32-bit applications only.</span></span> <span data-ttu-id="36f31-353">Dadurch wird überprüft, ob Anrufe an vertrauliche APIs wieder zu legitimen Anruferfunktionen zurückkehren.</span><span class="sxs-lookup"><span data-stu-id="36f31-353">This helps validate that calls to sensitive APIs will return to legitimate caller functions.</span></span> <span data-ttu-id="36f31-354">Dazu werden Aufrufe von vertraulichen APIs abgefangen und anschließend die Ausführung dieser APIs simuliert, indem die codierten Anweisungen für die Assemblysprache nach der RET-Anweisung gesucht werden, die an den Aufrufer zurückzukehren ist.</span><span class="sxs-lookup"><span data-stu-id="36f31-354">It does this by intercepting calls into sensitive APIs, and then simulating the execution of those APIs by walking through the encoded assembly language instructions looking for the RET instruction, which should return to the caller.</span></span> <span data-ttu-id="36f31-355">Anschließend wird diese Funktion überprüft und rückwärts im Arbeitsspeicher nach der vorherigen CALL-Anweisung geschritten, um festzustellen, ob die Funktion und die CALL-Anweisung übereinstimmen und dass die RET nicht abgefangen wurde.</span><span class="sxs-lookup"><span data-stu-id="36f31-355">It then inspects that function and walks backwards in memory to find the preceding CALL instruction to determine whether the function and CALL instruction match, and that the RET hasn't been intercepted.</span></span>

<span data-ttu-id="36f31-356">Die apIs, die von dieser Gegenmaßnahmen abgefangen werden, sind:</span><span class="sxs-lookup"><span data-stu-id="36f31-356">The APIs intercepted by this mitigation are:</span></span>

- `LoadLibraryA`
- `LoadLibraryW`
- `LoadLibraryExA`
- `LoadLibraryExW`
- `LdrLoadDll`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `VirtualProtect`
- `VirtualProtectEx`
- `NtProtectVirtualMemory`
- `HeapCreate`
- `RtlCreateHeap`
- `CreateProcessA`
- `CreateProcessW`
- `CreateProcessInternalA`
- `CreateProcessInternalW`
- `NtCreateUserProcess`
- `NtCreateProcess`
- `NtCreateProcessEx`
- `CreateRemoteThread`
- `CreateRemoteThreadEx`
- `NtCreateThreadEx`
- `WriteProcessMemory`
- `NtWriteVirtualMemory`
- `WinExec`
- `CreateFileMappingA`
- `CreateFileMappingW`
- `CreateFileMappingNumaW`
- `NtCreateSection`
- `MapViewOfFile`
- `MapViewOfFileEx`
- `MapViewOfFileFromApp`
- `LdrGetProcedureAddressForCaller`

<span data-ttu-id="36f31-357">Wenn ein ROP-Gadget erkannt wird, wird der Prozess beendet.</span><span class="sxs-lookup"><span data-stu-id="36f31-357">If a ROP gadget is detected, the process is terminated.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-358">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-358">Compatibility considerations</span></span>

<span data-ttu-id="36f31-359">Anwendungen, die API-Abfang durchführen, insbesondere Sicherheitssoftware, können kompatibilitätsprobleme mit dieser Gegenmaßnahmen verursachen.</span><span class="sxs-lookup"><span data-stu-id="36f31-359">Applications that perform API interception, particularly security software, can cause compatibility problems with this mitigation.</span></span>

<span data-ttu-id="36f31-360">Diese Gegenmaßnahmen sind mit der Arbitrary Code Guard-Gegenmaßnahmen nicht kompatibel.</span><span class="sxs-lookup"><span data-stu-id="36f31-360">This mitigation is incompatible with the Arbitrary Code Guard mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-361">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-361">Configuration options</span></span>

<span data-ttu-id="36f31-362">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-362">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-363">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-363">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="validate-api-invocation-callercheck"></a><span data-ttu-id="36f31-364">Überprüfen des API-Aufrufs (CallerCheck)</span><span class="sxs-lookup"><span data-stu-id="36f31-364">Validate API invocation (CallerCheck)</span></span>

### <a name="description"></a><span data-ttu-id="36f31-365">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-365">Description</span></span>

<span data-ttu-id="36f31-366">Validate API invocation (CallerCheck) ist eine Gegenmaßnahmen für ROP-Techniken (Return-Oriented Programming), die überprüfen, ob vertrauliche APIs von einem gültigen Aufrufer aufgerufen wurden.</span><span class="sxs-lookup"><span data-stu-id="36f31-366">Validate API invocation (CallerCheck) is a mitigation for return-oriented programming (ROP) techniques that validates that sensitive APIs were called from a valid caller.</span></span> <span data-ttu-id="36f31-367">Diese Risikominderung überprüft die übergebene Rückgabeadresse und zerlegt dann heuristisch rückwärts, um einen Anruf über der Rückgabeadresse zu finden, um zu ermitteln, ob das Anrufziel mit dem an die Funktion übergebenen Parameter entspricht.</span><span class="sxs-lookup"><span data-stu-id="36f31-367">This mitigation inspects the passed return address, and then heuristically disassembles backwards to find a call above the return address to determine if the call target matches the parameter passed into the function.</span></span>

<span data-ttu-id="36f31-368">Die apIs, die von dieser Gegenmaßnahmen abgefangen werden, sind:</span><span class="sxs-lookup"><span data-stu-id="36f31-368">The APIs intercepted by this mitigation are:</span></span>

- `LoadLibraryA`
- `LoadLibraryW`
- `LoadLibraryExA`
- `LoadLibraryExW`
- `LdrLoadDll`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `VirtualProtect`
- `VirtualProtectEx`
- `NtProtectVirtualMemory`
- `HeapCreate`
- `RtlCreateHeap`
- `CreateProcessA`
- `CreateProcessW`
- `CreateProcessInternalA`
- `CreateProcessInternalW`
- `NtCreateUserProcess`
- `NtCreateProcess`
- `NtCreateProcessEx`
- `CreateRemoteThread`
- `CreateRemoteThreadEx`
- `NtCreateThreadEx`
- `WriteProcessMemory`
- `NtWriteVirtualMemory`
- `WinExec`
- `CreateFileMappingA`
- `CreateFileMappingW`
- `CreateFileMappingNumaW`
- `NtCreateSection`
- `MapViewOfFile`
- `MapViewOfFileEx`
- `MapViewOfFileFromApp`
- `LdrGetProcedureAddressForCaller`

<span data-ttu-id="36f31-369">Wenn ein ROP-Gadget erkannt wird, wird der Prozess beendet.</span><span class="sxs-lookup"><span data-stu-id="36f31-369">If a ROP gadget is detected, the process is terminated.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-370">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-370">Compatibility considerations</span></span>

<span data-ttu-id="36f31-371">Anwendungen, die API-Abfang durchführen, insbesondere Sicherheitssoftware, können kompatibilitätsprobleme mit dieser Gegenmaßnahmen verursachen.</span><span class="sxs-lookup"><span data-stu-id="36f31-371">Applications that perform API interception, particularly security software, can cause compatibility problems with this mitigation.</span></span>

<span data-ttu-id="36f31-372">Diese Gegenmaßnahmen sind mit der Arbitrary Code Guard-Gegenmaßnahmen nicht kompatibel.</span><span class="sxs-lookup"><span data-stu-id="36f31-372">This mitigation is incompatible with the Arbitrary Code Guard mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-373">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-373">Configuration options</span></span>

<span data-ttu-id="36f31-374">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-374">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-375">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-375">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="validate-exception-chains-sehop"></a><span data-ttu-id="36f31-376">Überprüfen von Ausnahmeketten (SEHOP)</span><span class="sxs-lookup"><span data-stu-id="36f31-376">Validate exception chains (SEHOP)</span></span>

### <a name="description"></a><span data-ttu-id="36f31-377">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-377">Description</span></span>

<span data-ttu-id="36f31-378">Validate exception chains (SEHOP) is a mitigation against the *Structured Exception Handler (SEH) overwrite exploitation* technique.</span><span class="sxs-lookup"><span data-stu-id="36f31-378">Validate exception chains (SEHOP) is a mitigation against the *Structured Exception Handler (SEH) overwrite* exploitation technique.</span></span> <span data-ttu-id="36f31-379">[Strukturierte Ausnahmebehandlung](https://docs.microsoft.com/windows/win32/debug/structured-exception-handling) ist der Prozess, mit dem eine Anwendung eine bestimmte Ausnahme behandeln kann.</span><span class="sxs-lookup"><span data-stu-id="36f31-379">[Structured exception handling](https://docs.microsoft.com/windows/win32/debug/structured-exception-handling) is the process by which an application can ask to handle a particular exception.</span></span> <span data-ttu-id="36f31-380">Ausnahmehandler werden verkettet, sodass ein Ausnahmehandler, der eine bestimmte Ausnahme nicht behandeln möchte, an den nächsten Ausnahmehandler in der Kette übergeben werden kann, bis er sich entscheidet, diese zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="36f31-380">Exception handlers are chained together, so that if one exception handler chooses not to handle a particular exception, it can be passed on to the next exception handler in the chain until one decides to handle it.</span></span> <span data-ttu-id="36f31-381">Da die Liste des Handlers dynamisch ist, wird sie auf dem Stapel gespeichert.</span><span class="sxs-lookup"><span data-stu-id="36f31-381">Because the list of handler is dynamic, it is stored on the stack.</span></span> <span data-ttu-id="36f31-382">Ein Angreifer kann eine Sicherheitslücke beim Stapelüberlauf verwenden, um dann den Ausnahmehandler mit einem Zeiger auf den Code der Wahl des Angreifers zu überschreiben.</span><span class="sxs-lookup"><span data-stu-id="36f31-382">An attacker can use a stack overflow vulnerability to then overwrite the exception handler with a pointer to the code of the attacker's choice.</span></span>

<span data-ttu-id="36f31-383">Diese Risikominderung basiert auf dem Entwurf von SEH, wobei jeder SEH-Eintrag sowohl einen Zeiger auf den Ausnahmehandler als auch einen Zeiger auf den nächsten Handler in der Ausnahmekette enthält.</span><span class="sxs-lookup"><span data-stu-id="36f31-383">This mitigation relies on the design of SEH, where each SEH entry contains both a pointer to the exception handler, as well as a pointer to the next handler in the exception chain.</span></span> <span data-ttu-id="36f31-384">Diese Risikominderung wird vom Ausnahmesponser aufgerufen, der die SEH-Kette überprüft, wenn eine Ausnahme aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="36f31-384">This mitigation is called by the exception dispatcher, which validates the SEH chain when an exception is invoked.</span></span> <span data-ttu-id="36f31-385">Es überprüft, dass:</span><span class="sxs-lookup"><span data-stu-id="36f31-385">It verifies that:</span></span>

- <span data-ttu-id="36f31-386">Alle Ausnahmeketteneinträge befinden sich innerhalb der Stapelgrenzen</span><span class="sxs-lookup"><span data-stu-id="36f31-386">All exception chain records are within the stack boundaries</span></span>
- <span data-ttu-id="36f31-387">Alle Ausnahmedatensätze werden ausgerichtet</span><span class="sxs-lookup"><span data-stu-id="36f31-387">All exception records are aligned</span></span>
- <span data-ttu-id="36f31-388">Keine Ausnahmehandlerzeiger zeigen auf den Stapel</span><span class="sxs-lookup"><span data-stu-id="36f31-388">No exception handler pointers are pointing to the stack</span></span>
- <span data-ttu-id="36f31-389">Es gibt keine Rückwärtszeiger</span><span class="sxs-lookup"><span data-stu-id="36f31-389">There are no backward pointers</span></span>
- <span data-ttu-id="36f31-390">Die Ausnahmekette endet bei einem bekannten endgültigen Ausnahmehandler</span><span class="sxs-lookup"><span data-stu-id="36f31-390">The exception chain ends at a known final exception handler</span></span>

<span data-ttu-id="36f31-391">Wenn diese Überprüfungen fehlschlagen, wird die Ausnahmebehandlung abgebrochen, und die Ausnahme wird nicht behandelt.</span><span class="sxs-lookup"><span data-stu-id="36f31-391">If these validations fail, then exception handling is aborted, and the exception will not be handled.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-392">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-392">Compatibility considerations</span></span>

<span data-ttu-id="36f31-393">Kompatibilitätsprobleme mit SEHOP sind relativ selten.</span><span class="sxs-lookup"><span data-stu-id="36f31-393">Compatibility issues with SEHOP are relatively rare.</span></span> <span data-ttu-id="36f31-394">Es ist ungewöhnlich, dass eine Anwendung von einer Beschädigung der Ausnahmekette abhängig ist.</span><span class="sxs-lookup"><span data-stu-id="36f31-394">It's uncommon for an application to take a dependency on corrupting the exception chain.</span></span> <span data-ttu-id="36f31-395">Einige Anwendungen sind jedoch von den subtilen Änderungen des Timings betroffen, die sich möglicherweise als Racebedingung manifestieren, die einen latenten Multithreadingfehler in der Anwendung zeigt.</span><span class="sxs-lookup"><span data-stu-id="36f31-395">However, some applications are impacted by the subtle changes in timing, which may manifest as a race condition that reveals a latent multi-threading bug in the application.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-396">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-396">Configuration options</span></span>

> [!Note]
> <span data-ttu-id="36f31-397">**Validate exception chains (SEHOP)** has no audit mode.</span><span class="sxs-lookup"><span data-stu-id="36f31-397">**Validate exception chains (SEHOP)** has no audit mode.</span></span>

## <a name="validate-handle-usage"></a><span data-ttu-id="36f31-398">Überprüfen der Verarbeitung der Verwendung</span><span class="sxs-lookup"><span data-stu-id="36f31-398">Validate handle usage</span></span>

### <a name="description"></a><span data-ttu-id="36f31-399">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-399">Description</span></span>

<span data-ttu-id="36f31-400">*Bei der Überprüfung der Verwendung* von Handle handelt es sich um eine Risikominderung, die den Schutz vor angreifern mithilfe eines vorhandenen Handles für den Zugriff auf ein geschütztes Objekt unterstützt.</span><span class="sxs-lookup"><span data-stu-id="36f31-400">*Validate handle usage* is a mitigation that helps protect against an attacker using an existing handle to access a protected object.</span></span> <span data-ttu-id="36f31-401">Ein [Handle](https://docs.microsoft.com/windows/win32/sysinfo/handles-and-objects) ist ein Verweis auf ein geschütztes Objekt.</span><span class="sxs-lookup"><span data-stu-id="36f31-401">A [handle](https://docs.microsoft.com/windows/win32/sysinfo/handles-and-objects) is a reference to a protected object.</span></span> <span data-ttu-id="36f31-402">Wenn Anwendungscode auf ein ungültiges Handle verweist, könnte dies darauf hinweisen, dass ein Gegner versucht, ein zuvor aufgezeichnetes Handle zu verwenden (welche Anwendungsreferenzzählung jedoch nicht bekannt ist).</span><span class="sxs-lookup"><span data-stu-id="36f31-402">If application code is referencing an invalid handle, that could indicate that an adversary is attempting to use a handle it has previously recorded (but which application reference counting wouldn't be aware of).</span></span> <span data-ttu-id="36f31-403">Wenn die Anwendung versucht, ein ungültiges Objekt zu verwenden, statt einfach null zurück zu geben, wird von der Anwendung eine Ausnahme ausgelöst (STATUS_INVALID_HANDLE).</span><span class="sxs-lookup"><span data-stu-id="36f31-403">If the application attempts to use an invalid object, instead of simply returning null, the application will raise an exception (STATUS_INVALID_HANDLE).</span></span>

<span data-ttu-id="36f31-404">Diese Risikominderung wird automatisch auf Windows Store angewendet.</span><span class="sxs-lookup"><span data-stu-id="36f31-404">This mitigation is automatically applied to Windows Store applications.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-405">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-405">Compatibility considerations</span></span>

<span data-ttu-id="36f31-406">Anwendungen, die Verweise nicht genau nachverfolgen und diese Vorgänge nicht in Ausnahmehandler umschließen, werden potenziell von dieser Risikominderung betroffen sein.</span><span class="sxs-lookup"><span data-stu-id="36f31-406">Applications that were not accurately tracking handle references, and which were not wrapping these operations in exception handlers, will potentially be impacted by this mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-407">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-407">Configuration options</span></span>

> [!Note]
> <span data-ttu-id="36f31-408">**Die Überprüfung der Verwendung der** Verarbeitung hat keinen Überwachungsmodus.</span><span class="sxs-lookup"><span data-stu-id="36f31-408">**Validate handle usage** has no audit mode.</span></span>

## <a name="validate-heap-integrity"></a><span data-ttu-id="36f31-409">Überprüfen der Heapintegrität</span><span class="sxs-lookup"><span data-stu-id="36f31-409">Validate heap integrity</span></span>

### <a name="description"></a><span data-ttu-id="36f31-410">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-410">Description</span></span>

<span data-ttu-id="36f31-411">Die Überprüfung der Heapintegritätsminderung erhöht die Schutzebene von Heapminderungen in Windows, indem die Anwendung beendet wird, wenn eine Heapbeschädigung erkannt wird. </span><span class="sxs-lookup"><span data-stu-id="36f31-411">The *validate heap integrity* mitigation increases the protection level of heap mitigations in Windows, by causing the application to terminate if a heap corruption is detected.</span></span> <span data-ttu-id="36f31-412">Die Gegenmaßnahmen umfassen:</span><span class="sxs-lookup"><span data-stu-id="36f31-412">The mitigations include:</span></span>

- <span data-ttu-id="36f31-413">Verhindern, dass ein HEAP-Handle frei wird</span><span class="sxs-lookup"><span data-stu-id="36f31-413">Preventing a HEAP handle from being freed</span></span>
- <span data-ttu-id="36f31-414">Durchführen einer weiteren Überprüfung für erweiterte Blockkopfzeilen für Heapzuordnungen</span><span class="sxs-lookup"><span data-stu-id="36f31-414">Performing another validation on extended block headers for heap allocations</span></span>
- <span data-ttu-id="36f31-415">Überprüfen, ob Heapzuordnungen noch nicht als in-Use gekennzeichnet sind</span><span class="sxs-lookup"><span data-stu-id="36f31-415">Verifying that heap allocations are not already flagged as in-use</span></span>
- <span data-ttu-id="36f31-416">Hinzufügen von Schutzseiten zu großen Zuordnungen, Heapsegmenten und Untersegmenten über einer Mindestgröße</span><span class="sxs-lookup"><span data-stu-id="36f31-416">Adding guard pages to large allocations, heap segments, and subsegments above a minimum size</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-417">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-417">Compatibility considerations</span></span>

<span data-ttu-id="36f31-418">Diese Gegenmaßnahmen werden bereits standardmäßig für 64-Bit-Anwendungen und für 32-Bit-Anwendungen angewendet, die Windows Vista oder höher zielen.</span><span class="sxs-lookup"><span data-stu-id="36f31-418">This mitigation is already applied by default for 64-bit applications and for 32-bit applications targeting Windows Vista or later.</span></span> <span data-ttu-id="36f31-419">Ältere Anwendungen aus Windows XP oder früheren Versionen sind am stärksten gefährdet, kompatibilitätsprobleme sind jedoch selten.</span><span class="sxs-lookup"><span data-stu-id="36f31-419">Legacy applications from Windows XP or earlier are most at-risk, though compatibility issues are rare.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-420">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-420">Configuration options</span></span>

> [!Note]
> <span data-ttu-id="36f31-421">**Die Überprüfung der Heapintegrität** hat keinen Überwachungsmodus.</span><span class="sxs-lookup"><span data-stu-id="36f31-421">**Validate heap integrity** has no audit mode.</span></span>

## <a name="validate-image-dependency-integrity"></a><span data-ttu-id="36f31-422">Überprüfen der Bildabhängigkeitsintegrität</span><span class="sxs-lookup"><span data-stu-id="36f31-422">Validate image dependency integrity</span></span>

### <a name="description"></a><span data-ttu-id="36f31-423">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-423">Description</span></span>

<span data-ttu-id="36f31-424">Die *Überprüfung der Imageabhängigkeitsminderung* schützt vor Angriffen, die versuchen, Code durch dlls zu ersetzen, die statisch durch Windows verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="36f31-424">The *validate image dependency* mitigation helps protect against attacks that attempt to substitute code for dlls that are statically linked by Windows binaries.</span></span> <span data-ttu-id="36f31-425">Die Technik der DLL-Ansage missbraucht den Suchmechanismus des Ladeprogrammes, um schädlichen Code zu injizieren, der verwendet werden kann, um schadhafter Code in einem erhöhten Kontext ausgeführt zu werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-425">The technique of DLL planting abuses the loader's search mechanism to inject malicious code, which can be used to get malicious code running in an elevated context.</span></span> <span data-ttu-id="36f31-426">Wenn der Ladevorgang eine Windows signierte Binärdatei lädt und dann alle dlls lädt, von denen die Binärdatei abhängt, werden diese Binärdateien überprüft, um sicherzustellen, dass sie auch digital als binäre Windows sind.</span><span class="sxs-lookup"><span data-stu-id="36f31-426">When the loader is loading a Windows signed binary, and then loads up any dlls that the binary depends on, these binaries will be verified to ensure that they are also digitally signed as a Windows binary.</span></span> <span data-ttu-id="36f31-427">Wenn die Signaturüberprüfung nicht möglich ist, wird die DLL nicht geladen, und es wird eine Ausnahme ausgelöst, und der Status STATUS_INVALID_IMAGE_HASH.</span><span class="sxs-lookup"><span data-stu-id="36f31-427">If they fail the signature check, the dll will not be loaded, and will throw an exception, returning a status of STATUS_INVALID_IMAGE_HASH.</span></span>

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-428">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-428">Compatibility considerations</span></span>

<span data-ttu-id="36f31-429">Kompatibilitätsprobleme sind ungewöhnlich.</span><span class="sxs-lookup"><span data-stu-id="36f31-429">Compatibility issues are uncommon.</span></span> <span data-ttu-id="36f31-430">Anwendungen, die darauf angewiesen sind, Windows Binärdateien durch lokale private Versionen zu ersetzen, sind betroffen, und es besteht auch ein geringes Risiko, dass in Multithreadanwendungen subtile Zeitfehler angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-430">Applications that depend on replacing Windows binaries with local private versions will be impacted, and there is also a small risk of revealing subtle timing bugs in multi-threaded applications.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-431">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-431">Configuration options</span></span>

<span data-ttu-id="36f31-432">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-432">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-433">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-433">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>

## <a name="validate-stack-integrity-stackpivot"></a><span data-ttu-id="36f31-434">Überprüfen der Stapelintegrität (StackPivot)</span><span class="sxs-lookup"><span data-stu-id="36f31-434">Validate stack integrity (StackPivot)</span></span>

### <a name="description"></a><span data-ttu-id="36f31-435">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="36f31-435">Description</span></span>

<span data-ttu-id="36f31-436">Die Überprüfung der Stapelintegrität *(StackPivot)* schützt vor dem StackPivot-Angriff, einem ROP-Angriff, bei dem ein Angreifer einen gefälschten Stapel im Heapspeicher erstellt, und trickst die Anwendung dann dazu, in den gefälschten Stapel zurück zu kehren, der den Ausführungsfluss steuert.</span><span class="sxs-lookup"><span data-stu-id="36f31-436">The *validate stack integrity (StackPivot)* mitigation helps protect against the Stack Pivot attack, a ROP attack where an attacker creates a fake stack in heap memory, and then tricks the application into returning into the fake stack that controls the flow of execution.</span></span>

<span data-ttu-id="36f31-437">Diese Risikominderung fängt Windows APIs ab und überprüft den Wert des Stapelzeigers.</span><span class="sxs-lookup"><span data-stu-id="36f31-437">This mitigation intercepts many Windows APIs, and inspects the value of the stack pointer.</span></span> <span data-ttu-id="36f31-438">Wenn die Adresse des Stapelzeigers nicht zwischen dem unteren und oberen Rand des Stapels fällt, wird ein Ereignis aufgezeichnet, und wenn nicht im Überwachungsmodus, wird der Prozess beendet.</span><span class="sxs-lookup"><span data-stu-id="36f31-438">If the address of the stack pointer does not fall between the bottom and the top of the stack, then an event is recorded and, if not in audit mode, the process will be terminated.</span></span>

<span data-ttu-id="36f31-439">Die apIs, die von dieser Gegenmaßnahmen abgefangen werden, sind:</span><span class="sxs-lookup"><span data-stu-id="36f31-439">The APIs intercepted by this mitigation are:</span></span>

- `LoadLibraryA`
- `LoadLibraryW`
- `LoadLibraryExA`
- `LoadLibraryExW`
- `LdrLoadDll`
- `VirtualAlloc`
- `VirtualAllocEx`
- `NtAllocateVirtualMemory`
- `VirtualProtect`
- `VirtualProtectEx`
- `NtProtectVirtualMemory`
- `HeapCreate`
- `RtlCreateHeap`
- `CreateProcessA`
- `CreateProcessW`
- `CreateProcessInternalA`
- `CreateProcessInternalW`
- `NtCreateUserProcess`
- `NtCreateProcess`
- `NtCreateProcessEx`
- `CreateRemoteThread`
- `CreateRemoteThreadEx`
- `NtCreateThreadEx`
- `WriteProcessMemory`
- `NtWriteVirtualMemory`
- `WinExec`
- `CreateFileMappingA`
- `CreateFileMappingW`
- `CreateFileMappingNumaW`
- `NtCreateSection`
- `MapViewOfFile`
- `MapViewOfFileEx`
- `MapViewOfFileFromApp`
- `LdrGetProcedureAddressForCaller`

### <a name="compatibility-considerations"></a><span data-ttu-id="36f31-440">Überlegungen zur Kompatibilität</span><span class="sxs-lookup"><span data-stu-id="36f31-440">Compatibility considerations</span></span>

<span data-ttu-id="36f31-441">Anwendungen, die gefälschte Stapel verwenden, werden betroffen sein, und es besteht auch ein geringes Risiko, dass in Multithreadanwendungen subtile Zeitfehler angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="36f31-441">Applications that are using fake stacks will be impacted, and there is also a small risk of revealing subtle timing bugs in multi-threaded applications.</span></span>
<span data-ttu-id="36f31-442">Anwendungen, die API-Abfang durchführen, insbesondere Sicherheitssoftware, können kompatibilitätsprobleme mit dieser Gegenmaßnahmen verursachen.</span><span class="sxs-lookup"><span data-stu-id="36f31-442">Applications that perform API interception, particularly security software, can cause compatibility problems with this mitigation.</span></span>

<span data-ttu-id="36f31-443">Diese Gegenmaßnahmen sind mit der Arbitrary Code Guard-Gegenmaßnahmen nicht kompatibel.</span><span class="sxs-lookup"><span data-stu-id="36f31-443">This mitigation is incompatible with the Arbitrary Code Guard mitigation.</span></span>

### <a name="configuration-options"></a><span data-ttu-id="36f31-444">Konfigurationsoptionen</span><span class="sxs-lookup"><span data-stu-id="36f31-444">Configuration options</span></span>

<span data-ttu-id="36f31-445">**Nur Überwachung** – Sie können diese Risikominderung im Überwachungsmodus aktivieren, um die potenziellen Kompatibilitätswirkungen auf eine Anwendung zu messen.</span><span class="sxs-lookup"><span data-stu-id="36f31-445">**Audit Only** - You can enable this mitigation in audit mode in order to measure the potential compatibility impact on an application.</span></span> <span data-ttu-id="36f31-446">Überwachungsereignisse können dann entweder in der Ereignisanzeige oder mithilfe von Advanced Hunting in [Microsoft Defender for Endpoint angezeigt werden.](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview)</span><span class="sxs-lookup"><span data-stu-id="36f31-446">Audit events can then be viewed either in the event viewer or using Advanced Hunting in [Microsoft Defender for Endpoint](https://docs.microsoft.com/microsoft-365/security/defender/advanced-hunting-overview).</span></span>
