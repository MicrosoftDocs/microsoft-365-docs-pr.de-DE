---
title: Verwenden der Befehlszeile zum Verwalten von Microsoft Defender Antivirus
description: Führen Sie Microsoft Defender Antivirus Scans aus, und konfigurieren Sie den Schutz der nächsten Generation mit einem dedizierten Befehlszeilenprogramm.
keywords: Ausführen des Windows Defender-Scans, Ausführen eines Antivirusscans über die Befehlszeile, Ausführen des Windows Defender-Scans über die Befehlszeile, mpcmdrun, Defender
search.product: eADQiWindows 10XVcnh
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
localization_priority: Normal
author: denisebmsft
ms.author: deniseb
ms.custom: nextgen
ms.reviewer: ksarens
manager: dansimp
ms.date: 05/24/2021
ms.technology: mde
ms.topic: how-to
ms.openlocfilehash: efeb49b2741bdc45f7924032c2deb8a27458ca29
ms.sourcegitcommit: 4886457c0d4248407bddec56425dba50bb60d9c4
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 07/03/2021
ms.locfileid: "53289415"
---
# <a name="configure-and-manage-microsoft-defender-antivirus-with-the-mpcmdrunexe-command-line-tool"></a><span data-ttu-id="660b0-104">Konfigurieren und Verwalten von Microsoft Defender Antivirus mit dem Befehlszeilentool mpcmdrun.exe</span><span class="sxs-lookup"><span data-stu-id="660b0-104">Configure and manage Microsoft Defender Antivirus with the mpcmdrun.exe command-line tool</span></span>

<span data-ttu-id="660b0-105">**Gilt für:**</span><span class="sxs-lookup"><span data-stu-id="660b0-105">**Applies to:**</span></span>

- [<span data-ttu-id="660b0-106">Microsoft Defender für Endpunkt</span><span class="sxs-lookup"><span data-stu-id="660b0-106">Microsoft Defender for Endpoint</span></span>](/microsoft-365/security/defender-endpoint/)

<span data-ttu-id="660b0-107">Sie können verschiedene Funktionen in Microsoft Defender Antivirus mithilfe des dedizierten Befehlszeilentools **mpcmdrun.exe** ausführen.</span><span class="sxs-lookup"><span data-stu-id="660b0-107">You can perform various functions in Microsoft Defender Antivirus using the dedicated command-line tool **mpcmdrun.exe**.</span></span> <span data-ttu-id="660b0-108">Dieses Hilfsprogramm ist nützlich, wenn Sie Microsoft Defender Antivirus Aufgaben automatisieren möchten.</span><span class="sxs-lookup"><span data-stu-id="660b0-108">This utility is useful when you want to automate Microsoft Defender Antivirus tasks.</span></span> <span data-ttu-id="660b0-109">Sie finden das Hilfsprogramm unter `%ProgramFiles%\Windows Defender\MpCmdRun.exe` .</span><span class="sxs-lookup"><span data-stu-id="660b0-109">You can find the utility in `%ProgramFiles%\Windows Defender\MpCmdRun.exe`.</span></span> <span data-ttu-id="660b0-110">Führen Sie ihn über eine Eingabeaufforderung aus.</span><span class="sxs-lookup"><span data-stu-id="660b0-110">Run it from a command prompt.</span></span>

> [!TIP]
> <span data-ttu-id="660b0-111">Möglicherweise müssen Sie eine Version der Eingabeaufforderung auf Administratorebene öffnen.</span><span class="sxs-lookup"><span data-stu-id="660b0-111">You might need to open an administrator-level version of the command prompt.</span></span> <span data-ttu-id="660b0-112">Wenn Sie im Startmenü nach **eingabeaufforderung** suchen, wählen Sie **als Administrator ausführen** aus.</span><span class="sxs-lookup"><span data-stu-id="660b0-112">When you search for **Command Prompt** on the Start menu, choose **Run as administrator**.</span></span> <span data-ttu-id="660b0-113">Wenn Sie eine aktualisierte Version von Microsoft Defender Platform ausführen, führen Sie `MpCmdRun` den folgenden Speicherort aus: `C:\ProgramData\Microsoft\Windows Defender\Platform\<antimalware platform version>` .</span><span class="sxs-lookup"><span data-stu-id="660b0-113">If you're running an updated Microsoft Defender Platform version, run `MpCmdRun` from the following location: `C:\ProgramData\Microsoft\Windows Defender\Platform\<antimalware platform version>`.</span></span> <span data-ttu-id="660b0-114">Weitere Informationen zur Antischadsoftwareplattform finden Sie unter [Microsoft Defender Antivirus Updates und Baselines.](manage-updates-baselines-microsoft-defender-antivirus.md)</span><span class="sxs-lookup"><span data-stu-id="660b0-114">For more information about the antimalware platform, see [Microsoft Defender Antivirus updates and baselines](manage-updates-baselines-microsoft-defender-antivirus.md).</span></span>

<span data-ttu-id="660b0-115">Das Hilfsprogramm MpCmdRun verwendet die folgende Syntax:</span><span class="sxs-lookup"><span data-stu-id="660b0-115">The MpCmdRun utility uses the following syntax:</span></span>

```console
MpCmdRun.exe [command] [-options]
```

<span data-ttu-id="660b0-116">Hier ist ein Beispiel:</span><span class="sxs-lookup"><span data-stu-id="660b0-116">Here's an example:</span></span>

```console
MpCmdRun.exe -Scan -ScanType 2
``` 

<span data-ttu-id="660b0-117">In unserem Beispiel startet das Hilfsprogramm MpCmdRun eine vollständige Antivirenprüfung auf dem Gerät.</span><span class="sxs-lookup"><span data-stu-id="660b0-117">In our example, the MpCmdRun utility starts a full antivirus scan on the device.</span></span>

## <a name="commands"></a><span data-ttu-id="660b0-118">Befehle</span><span class="sxs-lookup"><span data-stu-id="660b0-118">Commands</span></span>

| <span data-ttu-id="660b0-119">Befehl</span><span class="sxs-lookup"><span data-stu-id="660b0-119">Command</span></span>  | <span data-ttu-id="660b0-120">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="660b0-120">Description</span></span>   |
|:----|:----|
| <span data-ttu-id="660b0-121">`-?`**oder**`-h`</span><span class="sxs-lookup"><span data-stu-id="660b0-121">`-?` **or** `-h`</span></span>   | <span data-ttu-id="660b0-122">Zeigt alle verfügbaren Optionen für das MpCmdRun-Tool an.</span><span class="sxs-lookup"><span data-stu-id="660b0-122">Displays all available options for the MpCmdRun tool</span></span> |
| `-Scan [-ScanType [<value>]] [-File <path> [-DisableRemediation] [-BootSectorScan] [-CpuThrottling]] [-Timeout <days>] [-Cancel]` | <span data-ttu-id="660b0-123">Sucht nach Schadsoftware.</span><span class="sxs-lookup"><span data-stu-id="660b0-123">Scans for malicious software.</span></span> <span data-ttu-id="660b0-124">Die Werte für **ScanType** sind:</span><span class="sxs-lookup"><span data-stu-id="660b0-124">Values for **ScanType** are:</span></span><p><span data-ttu-id="660b0-125">**0** Standard, gemäß Ihrer Konfiguration</span><span class="sxs-lookup"><span data-stu-id="660b0-125">**0** Default, according to your configuration</span></span><p><span data-ttu-id="660b0-126">**1** Schnellscan</span><span class="sxs-lookup"><span data-stu-id="660b0-126">**1** Quick scan</span></span><p><span data-ttu-id="660b0-127">**2** Vollständige Überprüfung</span><span class="sxs-lookup"><span data-stu-id="660b0-127">**2** Full scan</span></span><p><span data-ttu-id="660b0-128">**3** Benutzerdefinierte Datei- und Verzeichnisüberprüfung.</span><span class="sxs-lookup"><span data-stu-id="660b0-128">**3** File and directory custom scan.</span></span><p><span data-ttu-id="660b0-129">CpuThrottling wird gemäß Richtlinienkonfigurationen ausgeführt</span><span class="sxs-lookup"><span data-stu-id="660b0-129">CpuThrottling runs according to policy configurations</span></span> |
| `-Trace [-Grouping #] [-Level #]` | <span data-ttu-id="660b0-130">Startet die Diagnoseablaufverfolgung</span><span class="sxs-lookup"><span data-stu-id="660b0-130">Starts diagnostic tracing</span></span> |
| `-GetFiles [-SupportLogLocation <path>]` | <span data-ttu-id="660b0-131">Sammelt Supportinformationen.</span><span class="sxs-lookup"><span data-stu-id="660b0-131">Collects support information.</span></span> <span data-ttu-id="660b0-132">Siehe["Sammeln von Diagnosedaten"](collect-diagnostic-data.md)</span><span class="sxs-lookup"><span data-stu-id="660b0-132">See '[collecting diagnostic data](collect-diagnostic-data.md)'</span></span>  |
| `-GetFilesDiagTrack`  | <span data-ttu-id="660b0-133">Identisch mit `-GetFiles` , gibt aber in temporären DiagTrack-Ordner aus</span><span class="sxs-lookup"><span data-stu-id="660b0-133">Same as `-GetFiles`, but outputs to temporary DiagTrack folder</span></span> |
| `-RemoveDefinitions [-All]` | <span data-ttu-id="660b0-134">Stellt die installierte Security Intelligence mit einer vorherigen Sicherungskopie oder dem ursprünglichen Standardsatz wieder her.</span><span class="sxs-lookup"><span data-stu-id="660b0-134">Restores the installed Security intelligence to a previous backup copy or to the original default set</span></span> |
| `-RemoveDefinitions [-DynamicSignatures]` | <span data-ttu-id="660b0-135">Entfernt nur die dynamisch heruntergeladene Sicherheitsintelligenz</span><span class="sxs-lookup"><span data-stu-id="660b0-135">Removes only the dynamically downloaded Security intelligence</span></span> |
| `-RemoveDefinitions [-Engine]` | <span data-ttu-id="660b0-136">Stellt das zuvor installierte Modul wieder her</span><span class="sxs-lookup"><span data-stu-id="660b0-136">Restores the previous installed engine</span></span> |
| `-SignatureUpdate [-UNC \| -MMPC]` | <span data-ttu-id="660b0-137">Sucht nach neuen Security Intelligence-Updates</span><span class="sxs-lookup"><span data-stu-id="660b0-137">Checks for new Security intelligence updates</span></span> |
| `-Restore  [-ListAll \| [[-Name <name>] [-All] \| [-FilePath <filePath>]] [-Path <path>]]` | <span data-ttu-id="660b0-138">Wiederherstellen oder Auflisten von isolierten Elementen</span><span class="sxs-lookup"><span data-stu-id="660b0-138">Restores or lists quarantined item(s)</span></span> |
| `-AddDynamicSignature [-Path]` | <span data-ttu-id="660b0-139">Lädt dynamische Sicherheitsintelligenz</span><span class="sxs-lookup"><span data-stu-id="660b0-139">Loads dynamic Security intelligence</span></span> |
| `-ListAllDynamicSignatures` | <span data-ttu-id="660b0-140">Listet die geladene dynamische Sicherheitsintelligenz auf.</span><span class="sxs-lookup"><span data-stu-id="660b0-140">Lists the loaded dynamic Security intelligence</span></span> |
| `-RemoveDynamicSignature [-SignatureSetID]` | <span data-ttu-id="660b0-141">Entfernt dynamische Sicherheitsintelligenz</span><span class="sxs-lookup"><span data-stu-id="660b0-141">Removes dynamic Security intelligence</span></span> |
| `-CheckExclusion -path <path>` | <span data-ttu-id="660b0-142">Überprüft, ob ein Pfad ausgeschlossen ist</span><span class="sxs-lookup"><span data-stu-id="660b0-142">Checks whether a path is excluded</span></span> |
| `-ValidateMapsConnection` | <span data-ttu-id="660b0-143">Überprüft, ob Ihr Netzwerk mit dem Microsoft Defender Antivirus Clouddienst kommunizieren kann.</span><span class="sxs-lookup"><span data-stu-id="660b0-143">Verifies that your network can communicate with the Microsoft Defender Antivirus cloud service.</span></span> <span data-ttu-id="660b0-144">Dieser Befehl funktioniert nur für Windows 10, Version 1703 oder höher.</span><span class="sxs-lookup"><span data-stu-id="660b0-144">This command will only work on Windows 10, version 1703 or higher.</span></span>|

## <a name="common-errors-in-running-commands-via-mpcmdrunexe"></a><span data-ttu-id="660b0-145">Häufige Fehler beim Ausführen von Befehlen über mpcmdrun.exe</span><span class="sxs-lookup"><span data-stu-id="660b0-145">Common errors in running commands via mpcmdrun.exe</span></span> 

<span data-ttu-id="660b0-146">In der folgenden Tabelle sind häufige Fehler aufgeführt, die bei Verwendung des MpCmdRun-Tools auftreten können.</span><span class="sxs-lookup"><span data-stu-id="660b0-146">The following table lists common errors that can occur while using the MpCmdRun tool.</span></span>

|<span data-ttu-id="660b0-147">Fehlermeldung</span><span class="sxs-lookup"><span data-stu-id="660b0-147">Error message</span></span> | <span data-ttu-id="660b0-148">Mögliche Ursache</span><span class="sxs-lookup"><span data-stu-id="660b0-148">Possible reason</span></span> |
|:----|:----|
| <span data-ttu-id="660b0-149">**ValidateMapsConnection-Fehler (800106BA)** oder **0x800106BA**</span><span class="sxs-lookup"><span data-stu-id="660b0-149">**ValidateMapsConnection failed (800106BA)** or **0x800106BA**</span></span> | <span data-ttu-id="660b0-150">Der Microsoft Defender Antivirus Dienst ist deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="660b0-150">The Microsoft Defender Antivirus service is disabled.</span></span> <span data-ttu-id="660b0-151">Aktivieren Sie den Dienst, und versuchen Sie es erneut.</span><span class="sxs-lookup"><span data-stu-id="660b0-151">Enable the service and try again.</span></span> <span data-ttu-id="660b0-152">Wenn Sie Hilfe beim erneuten Aktivieren von Microsoft Defender Antivirus benötigen, lesen Sie ["Neu installieren/aktivieren" Microsoft Defender Antivirus auf Ihren Endpunkten.](switch-to-microsoft-defender-setup.md#reinstallenable-microsoft-defender-antivirus-on-your-endpoints)</span><span class="sxs-lookup"><span data-stu-id="660b0-152">If you need help re-enabling Microsoft Defender Antivirus, see [Reinstall/enable Microsoft Defender Antivirus on your endpoints](switch-to-microsoft-defender-setup.md#reinstallenable-microsoft-defender-antivirus-on-your-endpoints).</span></span><p> <span data-ttu-id="660b0-153">**TIPP:** In Windows 10 1909 oder älter und Windows Server 2019 oder älter wurde der Dienst früher *Windows Defender Antivirus* aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="660b0-153">**TIP**: In Windows 10 1909 or older, and Windows Server 2019 or older, the service was formerly called *Windows Defender Antivirus*.</span></span> |
| <span data-ttu-id="660b0-154">**0x80070667**</span><span class="sxs-lookup"><span data-stu-id="660b0-154">**0x80070667**</span></span> | <span data-ttu-id="660b0-155">Sie führen den `-ValidateMapsConnection` Befehl auf einem Computer aus, der Windows 10 Version 1607 oder älter oder Windows Server 2016 oder älter ist.</span><span class="sxs-lookup"><span data-stu-id="660b0-155">You're running the `-ValidateMapsConnection` command from a computer that is Windows 10 version 1607 or older, or Windows Server 2016 or older.</span></span> <span data-ttu-id="660b0-156">Führen Sie den Befehl von einem Computer aus, der Windows 10 Version 1703 oder höher oder Windows Server 2019 oder höher ist.</span><span class="sxs-lookup"><span data-stu-id="660b0-156">Run the command from a machine that is Windows 10 version 1703 or newer, or Windows Server 2019 or newer.</span></span>|
| <span data-ttu-id="660b0-157">**MpCmdRun wird nicht als interner oder externer Befehl, funktionsfähiges Programm oder Batchdatei erkannt.**</span><span class="sxs-lookup"><span data-stu-id="660b0-157">**MpCmdRun is not recognized as an internal or external command, operable program, or batch file.**</span></span> | <span data-ttu-id="660b0-158">Das Tool muss entweder `%ProgramFiles%\Windows Defender` oder `C:\ProgramData\Microsoft\Windows Defender\Platform\4.18.2012.4-0` (wo sich `2012.4-0` Plattformupdates mit Ausnahme von März monatlich unterscheiden können) ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="660b0-158">The tool must be run from either `%ProgramFiles%\Windows Defender` or `C:\ProgramData\Microsoft\Windows Defender\Platform\4.18.2012.4-0` (where `2012.4-0` might differ since platform updates are monthly except for March)</span></span>|
| <span data-ttu-id="660b0-159">**ValidateMapsConnection konnte keine Verbindung mit MAPS herstellen (hr=80070005 httpcode=450)**</span><span class="sxs-lookup"><span data-stu-id="660b0-159">**ValidateMapsConnection failed to establish a connection to MAPS (hr=80070005 httpcode=450)**</span></span> | <span data-ttu-id="660b0-160">Der Befehl wurde versucht, unzureichende Berechtigungen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="660b0-160">The command was attempted using insufficient privileges.</span></span> <span data-ttu-id="660b0-161">Verwenden Sie die Eingabeaufforderung (cmd.exe) als Administrator.</span><span class="sxs-lookup"><span data-stu-id="660b0-161">Use the command prompt (cmd.exe) as an administrator.</span></span>|
| <span data-ttu-id="660b0-162">**ValidateMapsConnection konnte keine Verbindung mit MAPS herstellen (hr=80070006 httpcode=451)**</span><span class="sxs-lookup"><span data-stu-id="660b0-162">**ValidateMapsConnection failed to establish a connection to MAPS (hr=80070006 httpcode=451)**</span></span> | <span data-ttu-id="660b0-163">Die Firewall blockiert die Verbindung oder führt eine SSL-Überprüfung durch.</span><span class="sxs-lookup"><span data-stu-id="660b0-163">The firewall is blocking the connection or conducting SSL inspection.</span></span> |
| <span data-ttu-id="660b0-164">**ValidateMapsConnection konnte keine Verbindung mit MAPS herstellen (hr=80004005 httpcode=450)**</span><span class="sxs-lookup"><span data-stu-id="660b0-164">**ValidateMapsConnection failed to establish a connection to MAPS (hr=80004005 httpcode=450)**</span></span> | <span data-ttu-id="660b0-165">Mögliche netzwerkbezogene Probleme, z. B. Probleme bei der Namensauflösung</span><span class="sxs-lookup"><span data-stu-id="660b0-165">Possible network-related issues, like name resolution problems</span></span>|
| <span data-ttu-id="660b0-166">**ValidateMapsConnection konnte keine Verbindung mit MAPS herstellen (hr=0x80508015**</span><span class="sxs-lookup"><span data-stu-id="660b0-166">**ValidateMapsConnection failed to establish a connection to MAPS (hr=0x80508015**</span></span> | <span data-ttu-id="660b0-167">Die Firewall blockiert die Verbindung oder führt eine SSL-Überprüfung durch.</span><span class="sxs-lookup"><span data-stu-id="660b0-167">The firewall is blocking the connection or conducting SSL inspection.</span></span> |
| <span data-ttu-id="660b0-168">**ValidateMapsConnection konnte keine Verbindung mit MAPS herstellen (hr=800722F0D**</span><span class="sxs-lookup"><span data-stu-id="660b0-168">**ValidateMapsConnection failed to establish a connection to MAPS (hr=800722F0D**</span></span> | <span data-ttu-id="660b0-169">Die Firewall blockiert die Verbindung oder führt eine SSL-Überprüfung durch.</span><span class="sxs-lookup"><span data-stu-id="660b0-169">The firewall is blocking the connection or conducting SSL inspection.</span></span> |
| <span data-ttu-id="660b0-170">**ValidateMapsConnection konnte keine Verbindung mit MAPS herstellen (hr=80072EE7 httpcode=451)**</span><span class="sxs-lookup"><span data-stu-id="660b0-170">**ValidateMapsConnection failed to establish a connection to MAPS (hr=80072EE7 httpcode=451)**</span></span> | <span data-ttu-id="660b0-171">Die Firewall blockiert die Verbindung oder führt eine SSL-Überprüfung durch.</span><span class="sxs-lookup"><span data-stu-id="660b0-171">The firewall is blocking the connection or conducting SSL inspection.</span></span> |

## <a name="see-also"></a><span data-ttu-id="660b0-172">Weitere Informationen:</span><span class="sxs-lookup"><span data-stu-id="660b0-172">See also</span></span>

- [<span data-ttu-id="660b0-173">Konfigurieren von Microsoft Defender Antivirus-Features</span><span class="sxs-lookup"><span data-stu-id="660b0-173">Configure Microsoft Defender Antivirus features</span></span>](configure-microsoft-defender-antivirus-features.md)
- [<span data-ttu-id="660b0-174">Konfigurieren und Überprüfen von Microsoft Defender Antivirus-Netzwerkverbindungen</span><span class="sxs-lookup"><span data-stu-id="660b0-174">Configure and validate Microsoft Defender Antivirus network connections</span></span>](configure-network-connections-microsoft-defender-antivirus.md)
- [<span data-ttu-id="660b0-175">Referenzthemen für Verwaltungs- und Konfigurationstools</span><span class="sxs-lookup"><span data-stu-id="660b0-175">Reference topics for management and configuration tools</span></span>](configuration-management-reference-microsoft-defender-antivirus.md)
